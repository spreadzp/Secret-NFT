(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{398:function(e){e.exports={contractName:"MarketPlace",abi:[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"idToken",type:"uint256"},{indexed:!1,internalType:"address",name:"buyerAddress",type:"address"},{indexed:!1,internalType:"uint256",name:"bet",type:"uint256"}],name:"BuyerMadeBet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"idToken",type:"uint256"},{indexed:!1,internalType:"address",name:"buyerAddress",type:"address"},{indexed:!1,internalType:"uint256",name:"bet",type:"uint256"}],name:"BuyerWithdrewBet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"idToken",type:"uint256"},{indexed:!1,internalType:"address",name:"buyerAddress",type:"address"}],name:"NewOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"idToken",type:"uint256"},{indexed:!1,internalType:"address",name:"buyerAddress",type:"address"},{indexed:!1,internalType:"string",name:"message",type:"string"}],name:"TokenForSell",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"idToken",type:"uint256"},{indexed:!1,internalType:"address",name:"sellerAddress",type:"address"},{indexed:!1,internalType:"uint256",name:"sum",type:"uint256"}],name:"sellerWithdrewSum",type:"event"},{inputs:[{internalType:"uint256",name:"idToken",type:"uint256"},{internalType:"address",name:"buyerAddress",type:"address"},{internalType:"bytes",name:"data",type:"bytes"}],name:"acceptRateAndTransferToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"idToken",type:"uint256"}],name:"buyerWithdrawBet",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],name:"buyersBoard",outputs:[{internalType:"address",name:"buyerAddress",type:"address"},{internalType:"string",name:"buyerPublicKey",type:"string"},{internalType:"uint256",name:"buyerBet",type:"uint256"},{internalType:"string",name:"goalOfPurchase",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"idToken",type:"uint256"},{internalType:"address",name:"buyerAddress",type:"address"}],name:"getBuyerIndex",outputs:[{internalType:"uint256",name:"buyerIndex",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"idToken",type:"uint256"}],name:"getBuyersById",outputs:[{components:[{internalType:"address",name:"buyerAddress",type:"address"},{internalType:"string",name:"buyerPublicKey",type:"string"},{internalType:"uint256",name:"buyerBet",type:"uint256"},{internalType:"string",name:"goalOfPurchase",type:"string"}],internalType:"struct MarketPlace.BuyerData[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"idToken",type:"uint256"}],name:"getCountBuyers",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"idToken",type:"uint256"}],name:"getCountSellers",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"address",name:"owner",type:"address"}],name:"getOwnerInfo",outputs:[{internalType:"string",name:"balance",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"idToken",type:"uint256"}],name:"getSellerById",outputs:[{components:[{internalType:"address",name:"sellerAddress",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint256",name:"sellerSum",type:"uint256"}],internalType:"struct MarketPlace.SellerData[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"idToken",type:"uint256"},{internalType:"address",name:"sellerAddress",type:"address"}],name:"getSellerIndex",outputs:[{internalType:"uint256",name:"sellerIndex",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"idToken",type:"uint256"},{internalType:"string",name:"buyerPublicKey",type:"string"},{internalType:"address",name:"buyerAddress",type:"address"},{internalType:"string",name:"goalPurchase",type:"string"}],name:"makeBet",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"idToken",type:"uint256"},{internalType:"string",name:"message",type:"string"}],name:"moveTokenForSell",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"ownwerContract",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"idToken",type:"uint256"},{internalType:"string",name:"message",type:"string"}],name:"removeTokenFromMarketPlace",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"idToken",type:"uint256"}],name:"sellerWithdrawSum",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],name:"sellersBoard",outputs:[{internalType:"address",name:"sellerAddress",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint256",name:"sellerSum",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}]}},399:function(e){e.exports={contractName:"EncNft",abi:[{inputs:[{internalType:"string",name:"_name",type:"string"},{internalType:"string",name:"_symbol",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"getIdsByAddress",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"getTokenInfoLastOwner",outputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"string",name:"encData",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"string",name:"tokenURI_",type:"string"},{internalType:"string",name:"decryptKeyForOwner",type:"string"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"baseURI_",type:"string"}],name:"setBaseURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],name:"tokenHistoryEncryption",outputs:[{internalType:"address",name:"currentOwner",type:"address"},{internalType:"string",name:"encryptKeyForOwner",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"tokenOwnersOfToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"},{internalType:"address",name:"ownerToken",type:"address"}],name:"transferTokenWithEncryption",outputs:[],stateMutability:"nonpayable",type:"function"}]}},402:function(e,t,n){e.exports=n(922)},407:function(e,t,n){},410:function(e,t){},417:function(e,t){},421:function(e,t){},446:function(e,t){},448:function(e,t){},461:function(e,t){},463:function(e,t){},499:function(e,t){},500:function(e,t){},519:function(e,t){},527:function(e,t){},581:function(e,t){},612:function(e,t){},614:function(e,t){},704:function(e,t){},713:function(e,t){},729:function(e,t){},730:function(e,t){},922:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(107),i=n.n(s),l=(n(407),n(14)),c=n(146),u=n(49),o=n(2),p=n.n(o),d=n(18),m=n(81),y=n(162),f=n(393),b=n(143),v=n.n(b),h=n(162);function E(e){return w.apply(this,arguments)}function w(){return(w=Object(d.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){window.ethereum.sendAsync({jsonrpc:"2.0",method:"eth_getEncryptionPublicKey",params:[t]},function(t,a){t?n(t):e(a.result)})}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function T(e,t){return O.apply(this,arguments)}function O(){return(O=Object(d.a)(p.a.mark(function e(t,n){var a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,h.encryptWithPublicKey(n,t);case 3:return a=e.sent,console.log("\ud83d\ude80 ~ file: metamask.js ~ line 30 ~ metamaskEncrypt ~ encrypted",a),r=h.cipher.stringify(a),e.abrupt("return",r);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function g(e,t){return j.apply(this,arguments)}function j(){return(j=Object(d.a)(p.a.mark(function e(t,n){var a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("\ud83d\ude80 ~ file: metamask.js ~ line 41 ~ metamaskEncrypt ~ pubKey",n),console.log(t),a=Object(f.encrypt)(n,{data:t},"x25519-xsalsa20-poly1305"),console.log("\ud83d\ude80 ~ file: metamask.js ~ line 31 ~ metamaskEncrypt ~ enc",a),r=v.a.utils.toHex(JSON.stringify(a)),console.log("\ud83d\ude80 ~ file: metamask.js ~ line 54 ~ metamaskEncrypt ~ encryptedMessage",r),e.abrupt("return",r);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}var k=function(e){return e.then(function(e){return[e,void 0]}).catch(function(e){return Promise.resolve([void 0,e])})};function x(e,t){return S.apply(this,arguments)}function S(){return(S=Object(d.a)(p.a.mark(function e(t,n){var a,r,s,i;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(window.ethereum.request({method:"eth_decrypt",params:[t,n]}));case 2:if(a=e.sent,r=Object(l.a)(a,2),s=r[0],!(i=r[1])){e.next=10;break}console.error(i.message),e.next=12;break;case 10:return console.log("decryptedMessage: ".concat(s)),e.abrupt("return",s);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function N(e,t){return z.apply(this,arguments)}function z(){return(z=Object(d.a)(p.a.mark(function e(t,n){var a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("\ud83d\ude80 ~ file: metamask.js ~ line 83 ~ decryptUriFile ~ encryptedMessage",t),e.prev=1,console.log("encryptedMessage.length: ".concat(t.length)),a=h.cipher.parse(t),e.next=6,h.decryptWithPrivateKey(n,a);case 6:return r=e.sent,console.log("\ud83d\ude80 ~ file: metamask.js ~ line 85 ~ decryptMessage ~ message",r),e.abrupt("return",r);case 11:e.prev=11,e.t0=e.catch(1),console.log("err :>> ",e.t0);case 14:case"end":return e.stop()}},e,null,[[1,11]])}))).apply(this,arguments)}function M(){return F.apply(this,arguments)}function F(){return(F=Object(d.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.ethereum.selectedAddress;case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function I(e,t){return D.apply(this,arguments)}function D(){return(D=Object(d.a)(p.a.mark(function e(t,n){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(t);case 2:return a=e.sent,console.log("\ud83d\ude80 ~ file: cypher.js ~ line 19 ~ encrypt ~ pk",a),e.next=6,g(n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}var P=function(e){e.drizzle;var t=e.drizzleState,n=e.encData,s=e.encPrivateKey,i=e.typeData,c=(e.showDialod,Object(a.useState)("")),u=Object(l.a)(c,2),o=(u[0],u[1]),y=Object(a.useState)(""),f=Object(l.a)(y,2),b=f[0],v=f[1],h=Object(a.useState)(""),E=Object(l.a)(h,2),w=E[0],T=E[1],O=Object(a.useState)(!1),g=Object(l.a)(O,2),j=g[0],k=g[1],S=Object(a.useState)(!1),z=Object(l.a)(S,2),M=(z[0],z[1]),F=Object(m.a)();F.register,F.handleSubmit,F.watch,F.errors;Object(a.useEffect)(function(){o(n)},[n]),Object(a.useEffect)(function(){j&&function(){var e=Object(d.a)(p.a.mark(function e(){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""===s){e.next=7;break}return e.next=3,x(s,t.accounts[0]);case 3:n=e.sent,console.log("\ud83d\ude80 ~ file: SetDecrypt.js ~ line 20 ~ decryptMessage ~ decMessage",n),v(n),M(!0);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[j,s]),Object(a.useEffect)(function(){b&&n&&function(){var e=Object(d.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(n,b);case 2:t=e.sent,T(t);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[b,n]);var I;return r.a.createElement("section",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"six columns"},r.a.createElement("label",{htmlFor:"decrypredData"},"Decrypted Data"),(I=i,r.a.createElement(r.a.Fragment,null,[0,"0"].includes(I)&&r.a.createElement("div",{name:"decrypredData",className:"u-full-width"},r.a.createElement("textarea",{rows:20,cols:80,value:w}),"!!!!!"),[1,"1"].includes(I)&&r.a.createElement("div",null,r.a.createElement("img",{name:"decrypredData",className:"u-full-width",src:w})),[2,"2"].includes(I)&&r.a.createElement("div",{name:"decrypredData",className:"u-full-width"},r.a.createElement("textarea",{rows:40,cols:80,value:w})))))),r.a.createElement("button",{className:"btn-upload",onClick:function(){return k(!j)}},"Decrypt Data"))},A=n(188),B=n(11),C=function(e){var t=Object(a.useState)(null),n=Object(l.a)(t,2),s=(n[0],n[1],Object(a.useState)("")),i=Object(l.a)(s,2),c=(i[0],i[1],Object(a.useState)("")),u=Object(l.a)(c,2),o=u[0],y=u[1],f=Object(a.useState)(""),b=Object(l.a)(f,2),v=(b[0],b[1],Object(a.useState)(0)),h=Object(l.a)(v,2),E=h[0],w=h[1],T=e.drizzle,O=e.drizzleState,g=e.ipfsLink,j=e.encryptedKey,k=e.typeData,x=T.contracts.EncNft,S=Object(m.a)(),N=S.register,z=S.handleSubmit,M=(S.watch,S.errors);Object(a.useEffect)(function(){function e(){return(e=Object(d.a)(p.a.mark(function e(){var t,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.methods.totalSupply().call({from:O.accounts[0]});case 2:t=e.sent,console.log("result !== countTokens :>> ",t,E),+t!==E&&(n=+t,console.log("\ud83d\ude80 ~ file: MintNFT.js ~ line 28 ~ countOfTokens ~ numResult",n),w(n),console.log("countTokens :>> ",E));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[]);var F=function(){var e=Object(d.a)(p.a.mark(function e(t){var n,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=I(t),console.log("\ud83d\ude80 ~ file: MintNFT.js ~ line 19 ~ onSubmit ~ stringUri",n),e.next=4,x.methods.mint(O.accounts[0],E+1,n,j).send({from:O.accounts[0],gasPrice:5*Math.pow(10,10),gasLimit:4e6});case 4:(a=e.sent)&&(console.log("\ud83d\ude80 ~ file: MintNFT.js ~ line 21 ~ onSubmit ~ resMint",a),y(a.transactionHash));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),I=function(e){console.log("typeData :>> ",k),0==k&&(e.description+=" #text"),1==k&&(e.description+=" #image"),2==k&&(e.description+=" #file"),console.log("\ud83d\ude80 ~ file: MintNFT.js ~ line 56 ~ data",e);var t=Object(B.a)(Object(B.a)({},e),{},{image:g});return JSON.stringify(t)};return r.a.createElement("section",null,r.a.createElement("div",null,"Mint new NFT to owner address"),r.a.createElement("form",{onSubmit:z(F)},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"u-full-width"},r.a.createElement("label",{htmlFor:"mNft"},"Name"),r.a.createElement("input",{name:"name",className:"u-full-width",placeholder:"Name of your NFT",ref:N({required:!0,maxLength:42})}),M.name&&r.a.createElement("span",null,"Use a valid input"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"u-full-width"},r.a.createElement("label",{htmlFor:"mNft"},"Description of the NFT"),r.a.createElement("input",{name:"description",className:"u-full-width",placeholder:"description data",ref:N({required:!1,maxLength:8e3})}),M.description&&r.a.createElement("span",null,"Use a valid input"))),r.a.createElement("input",{className:"btn-upload",type:"submit",value:"Mint"})),r.a.createElement("div",null,"Hash mint transaction:  ",o))},U=(n(912),n(929)),K=Object(A.create)("https://ipfs.infura.io:5001/api/v0"),R=[{value:0,label:"text"},{value:1,label:"image"},{value:2,label:"file"}],L=function(e){var t=Object(a.useState)(""),n=Object(l.a)(t,2),s=n[0],i=n[1],c=Object(a.useState)(null),u=Object(l.a)(c,2),o=(u[0],u[1],Object(a.useState)("")),f=Object(l.a)(o,2),b=f[0],v=f[1],h=Object(a.useState)(""),E=Object(l.a)(h,2),w=E[0],O=E[1],g=Object(a.useState)(""),j=Object(l.a)(g,2),k=j[0],x=j[1],S=Object(a.useState)(""),N=Object(l.a)(S,2),z=(N[0],N[1]),F=e.drizzle,D=e.drizzleState,A=Object(a.useState)(""),B=Object(l.a)(A,2),L=(B[0],B[1]),_=Object(a.useState)(""),H=Object(l.a)(_,2),W=(H[0],H[1],Object(a.useState)("")),q=Object(l.a)(W,2),Y=q[0],J=q[1],G=Object(a.useState)(""),Q=Object(l.a)(G,2),V=Q[0],X=Q[1],Z=Object(a.useState)(""),$=Object(l.a)(Z,2),ee=$[0],te=$[1],ne=Object(a.useState)(""),ae=Object(l.a)(ne,2),re=ae[0],se=ae[1],ie=Object(a.useState)(0),le=Object(l.a)(ie,2),ce=(le[0],le[1],Object(a.useState)(0)),ue=Object(l.a)(ce,2),oe=ue[0],pe=ue[1],de=Object(a.useState)(""),me=Object(l.a)(de,2),ye=me[0],fe=(me[1],Object(a.useState)("")),be=Object(l.a)(fe,2),ve=be[0],he=be[1],Ee=Object(m.a)(),we=Ee.register,Te=Ee.handleSubmit,Oe=(Ee.watch,Ee.errors);var ge=function(){var e=Object(d.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(re,Y);case 2:""!==(t=e.sent)&&x(t);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),je=function(){var e=Object(d.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("clearData :>> ",b),v(t.dataToEncrypt),z(t.addressToEncrypt),e.next=5,T(t.dataToEncrypt||b||ve,V);case 5:""!==(n=e.sent)&&O(n);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)(Object(d.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:(t=e.sent)&&se(t);case 4:case"end":return e.stop()}},e)})),[M,se]),Object(a.useEffect)(function(){w&&re&&function(){var e=Object(d.a)(p.a.mark(function e(){var t,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.add(w);case 2:t=e.sent,L(t.path),n="https://ipfs.infura.io/ipfs/".concat(t.path),i(n);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[w,re]);var ke=function(){var e=y.default.createIdentity();J(e.privateKey),X(e.publicKey),te(e.address)};return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Mint encoded NFT"),r.a.createElement("section",null,r.a.createElement("h2",null,"Step 1: create private key for the NFT"),r.a.createElement("button",{className:"btn-upload",onClick:function(){return ke()}},"Generate keys for encryption a data"),r.a.createElement("div",null,"pk: ",Y),r.a.createElement("div",null,"pubkey: ",V),r.a.createElement("div",null,"add: ",ee),r.a.createElement("div",null,"Creator address",re),Y&&r.a.createElement("h2",null,"Step 2: Encrypt private key via the creator public key"),Y&&r.a.createElement("button",{className:"btn-upload",onClick:function(){return ge()}},"Encrypt private key"),r.a.createElement("div",null,"Encrypted private key"),r.a.createElement("div",null,k),r.a.createElement("br",null),k&&r.a.createElement("h2",null,"Step 3: Encrypt data via generated public key for NFT URI and upload it to IPFS "),k&&r.a.createElement("form",{onSubmit:Te(function(e){console.log("\ud83d\ude80 ~ file: UploadIPFS.js ~ line 48 ~ data",e),je(e)})},r.a.createElement("label",null,"Choice type data"),r.a.createElement(U.a.Group,{className:"mb-3",controlId:"exampleForm.ControlSelect"},r.a.createElement(U.a.Select,{"aria-label":"Floating label select example",value:oe,onChange:function(e){return t=e.target.value,void pe(t);var t}},R.map(function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.label)}))),"1"===oe?r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1"},r.a.createElement("label",null,"Paste base64 string of the image"),r.a.createElement("textarea",{rows:8,value:ve,onChange:function(e){e&&e.target.value&&(he(e.target.value),v(e.target.event))}}),r.a.createElement("div",null,"Your image must be less than 1Mb for the service below")),"1"===oe&&r.a.createElement("input",{type:"button",className:"btn-upload",onClick:function(){return window.open("https://www.base64-image.de/","_blank")},value:"toBase64"})):r.a.createElement(r.a.Fragment,null,"0"===oe&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"u-full-width"},r.a.createElement("label",{htmlFor:"mURI"},"Data for encryption"),r.a.createElement("input",{name:"dataToEncrypt",className:"u-full-width",placeholder:"string data",ref:we({required:!1,maxLength:8e4})}),Oe.dataToEncrypt&&r.a.createElement("span",null,"Use a valid input"))),"2"===oe&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"u-full-width"},r.a.createElement("input",{type:"file",id:"upload",name:"fileToEncrypt",className:"u-full-width",onChange:function(e){var t=e.target.files[0];console.log("selectedOption :>> ",oe);var n=new FileReader;n.readAsText(t),n.onload=function(e){var t=e.target.result;v(t)},n.onerror=function(e){return console.error("Error: ",e)}},hidden:!0}),r.a.createElement("label",{className:"label-upload",htmlFor:"upload"},"Choose file"),Oe.fileToEncrypt&&r.a.createElement("span",null,"Use a valid input"),ye))),""!==b&&r.a.createElement("input",{className:"btn-upload",type:"submit",value:"Push encoded data to IPFS"})),s&&r.a.createElement("h2",null,"Step 4: Encrypt data via generated public key for NFT URI "),s&&r.a.createElement(P,{drizzle:F,drizzleState:D,encData:w,encPrivateKey:k,typeData:oe})),r.a.createElement("a",{href:s,target:"_blank"},s),s&&r.a.createElement("h2",null,"Step 5: Encrypt data via generated public key for NFT URI "),s&&r.a.createElement(C,{drizzle:F,drizzleState:D,ipfsLink:s,encryptedKey:k,typeData:oe}))},_=function(e){e.drizzle;var t=e.drizzleState,n=e.encData,s=Object(a.useState)(""),i=Object(l.a)(s,2),c=i[0],u=i[1],o=(t.contracts.Coupoken,Object(a.useState)("")),y=Object(l.a)(o,2),f=y[0],b=y[1],v=Object(a.useState)(""),h=Object(l.a)(v,2),E=h[0],w=h[1],T=Object(a.useState)(!1),O=Object(l.a)(T,2),g=O[0],j=O[1],k=Object(m.a)(),S=(k.register,k.handleSubmit,k.watch,k.errors);Object(a.useEffect)(function(){u(n)},[n]),Object(a.useEffect)(function(){g&&function(){var e=Object(d.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""===c){e.next=6;break}return e.next=3,x(c,"0x4D1E260E63e9331C4552991874dA4FBF4Aa6A3df");case 3:t=e.sent,console.log("\ud83d\ude80 ~ file: SetDecrypt.js ~ line 20 ~ decryptMessage ~ decMessage",t),b(t);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[g]),Object(a.useEffect)(function(){E&&function(){var e=Object(d.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""===c){e.next=6;break}return e.next=3,N(c,"0x4D1E260E63e9331C4552991874dA4FBF4Aa6A3df");case 3:t=e.sent,console.log("\ud83d\ude80 ~ file: SetDecrypt.js ~ line 20 ~ decryptMessage ~ decMessage",t),w(t);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[g,E]);return r.a.createElement("section",null,r.a.createElement("h2",null,"Download a file from IPFS"),r.a.createElement("div",null,c),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"six columns"},r.a.createElement("label",{htmlFor:"decrypredData"},"Encrypted Data"),r.a.createElement("div",{name:"decrypredData",className:"u-full-width"},E))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"u-full-width"},r.a.createElement("label",{htmlFor:"mURI"},"Read the file and decrypt"),r.a.createElement("input",{type:"file",name:"fileToDecrypt",className:"u-full-width",onChange:function(e){var t=e.target.files[0],n=new FileReader;n.readAsText(t),n.onload=function(e){var t=e.target.result;u(t)}}}),S.fileToDecrypt&&r.a.createElement("span",null,"Use a valid input"))),r.a.createElement("button",{onClick:function(){return j(!g)}},"DECRYPT"),r.a.createElement("h2",null,"Decrypted PK"),r.a.createElement("div",null,f),r.a.createElement("h2",null,"Decrypted file info"),r.a.createElement("div",null,E))},H=n(40),W=n(927),q=n(928),Y=n(930),J=function(e){var t=Object(a.useState)(null),n=Object(l.a)(t,2),s=(n[0],n[1],Object(a.useState)(0)),i=Object(l.a)(s,2),c=(i[0],i[1]),u=Object(a.useState)([]),o=Object(l.a)(u,2),m=o[0],y=o[1],f=Object(a.useState)(""),b=Object(l.a)(f,2),v=(b[0],b[1],Object(a.useState)(0)),h=Object(l.a)(v,2),E=(h[0],h[1],e.drizzle),w=e.drizzleState,T=e.nftOwnersDetails,O=E.contracts.EncNft,j=E.contracts.MarketPlace,k=Object(a.useState)(!1),S=Object(l.a)(k,2),N=S[0],z=S[1],M=Object(a.useState)(-1),F=Object(l.a)(M,2),I=F[0],D=F[1];Object(a.useEffect)(function(){P()},[]);var P=function(){var e=Object(d.a)(p.a.mark(function e(){var t,n,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.methods.totalSupply().call({from:w.accounts[0]});case 2:if((t=e.sent)>0){for(c(t),n=[],a=1;a<=t;a++)n.push({idNft:a,owner:"",name:"",description:"",image:""});n.map(function(){var e=Object(d.a)(p.a.mark(function e(t){var n,a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.methods.getCountBuyers(t.idNft).call({from:w.accounts[0]});case 3:if(!((n=e.sent)>0)){e.next=12;break}a=p.a.mark(function e(n){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.methods.buyersBoard(t.idNft,n).call({from:w.accounts[0]});case 2:(a=e.sent)&&y(function(e){return[].concat(Object(H.a)(e),[{idToken:t.idNft,buyerAddress:a[0],buyerPubKey:a[1],buyerBet:a[2],goalPurchase:a[3]}])});case 4:case"end":return e.stop()}},e)}),r=0;case 7:if(!(r<n)){e.next=12;break}return e.delegateYield(a(r),"t0",9);case 9:r++,e.next=7;break;case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(0),console.log("\ud83d\ude80 ~ file: BuyersBoard.js ~ line 72 ~ getBuyers ~ error",e.t1);case 17:case"end":return e.stop()}},e,null,[[0,14]])}));return function(t){return e.apply(this,arguments)}}())}case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(d.a)(p.a.mark(function e(t,n){var a,r,s,i;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.owner!==w.accounts[0]){e.next=16;break}return e.next=3,O.methods.getTokenInfoLastOwner(n.idNft).call({from:w.accounts[0]});case 3:return a=e.sent,r=a.encData,e.next=7,x(r,w.accounts[0]);case 7:if(!(s=e.sent)){e.next=16;break}return e.next=11,g(s,t.buyerPubKey);case 11:if(""===(i=e.sent)){e.next=16;break}return e.next=15,j.methods.acceptRateAndTransferToken(n.idNft,t.buyerAddress,i).send({from:w.accounts[0],gasPrice:10*Math.pow(10,10),gasLimit:6e5});case 15:e.sent;case 16:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),B=function(e){return r.a.createElement(W.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null," Buyer address "),r.a.createElement("th",null," Buyer rate "),r.a.createElement("th",null," Why do I need it "),r.a.createElement("th",null," Action "))),r.a.createElement("tbody",null,m.filter(function(t){return t.idToken===e.idNft}).map(function(t,n){return t.buyerBet>0&&r.a.createElement("tr",{key:n},r.a.createElement("td",{className:t.buyerAddress===w.accounts[0]?"owner-address":null}," ",t.buyerAddress," "),r.a.createElement("td",null,Y.a.formatEther(t.buyerBet),"ETH"),r.a.createElement("td",null," ",t.goalPurchase," "),r.a.createElement("td",null,function(e,t){return t.owner===w.accounts[0]&&t.approved?t.owner!==w.accounts[0]||t.approved?r.a.createElement("button",{className:"btn-sell",onClick:function(){return A(e,t)}},"Sell NFT"):"Need to approve to sell":""}(t,e)," "))})))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"btn-bet",onClick:function(){return z(!N)}},N?"Hide Buyers Boards":"Show Buyers Boards"),N&&r.a.createElement(q.a,{defaultActiveKey:"0"}," ",T.map(function(e,t){return r.a.createElement(q.a.Item,{eventKey:t,key:t},r.a.createElement(q.a.Header,{className:"ah",onClick:function(){return D(t)}}," ID: ",e.idNft," name: ",e.name," ",function(e){var t=0,n=m.filter(function(t){return t.idToken===e.idNft});return n.map(function(e){return t+=+Y.a.formatEther(e.buyerBet)}),r.a.createElement("div",{className:"info"},n.length," buyers,  Total sum bets: ",t," ETH ")}(e)),r.a.createElement(q.a.Body,{className:I===t?"active":"inactive"},r.a.createElement("div",null," ",e.description," ")," ",B(e))," ")})))},G=n(931),Q=function(e){var t=Object(a.useState)(null),n=Object(l.a)(t,2),s=(n[0],n[1],Object(a.useState)("")),i=Object(l.a)(s,2),c=(i[0],i[1],Object(a.useState)("")),u=Object(l.a)(c,2),o=u[0],y=u[1],f=Object(a.useState)(""),b=Object(l.a)(f,2),v=(b[0],b[1],e.drizzle),h=e.drizzleState,E=e.pk,w=e.address,T=e.idToken,O=e.showForm,g=e.isShowForm,j=v.contracts.MarketPlace,k=Object(m.a)(),x=k.register,S=k.handleSubmit,N=(k.watch,k.errors),z=(k.setFocus,function(){var e=Object(d.a)(p.a.mark(function e(t){var n,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=G.a.from(Y.a.parseUnits(t.valueBet,18)),e.next=3,j.methods.makeBet(T,E,h.accounts[0],t.goalPurchase).send({from:h.accounts[0],value:n,gasPrice:10*Math.pow(10,10),gasLimit:4e5});case 3:a=e.sent,O(!1),a&&y(a.transactionHash);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());return r.a.createElement(r.a.Fragment,null,g&&r.a.createElement("section",null,r.a.createElement("div",null,"Bet params"),r.a.createElement("form",{onSubmit:S(z)},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"u-full-width"},r.a.createElement("label",{htmlFor:"mNft"},"Id token"),r.a.createElement("input",{name:"tokenId",className:"u-full-width",value:T,disabled:!0,ref:x({required:!0,maxLength:82})}),N.tokenId&&r.a.createElement("span",null,"Use a valid input"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"u-full-width"},r.a.createElement("label",{htmlFor:"pk"},"Public key of your account"),r.a.createElement("input",{name:"pk",className:"u-full-width",value:E,disabled:!0,ref:x({required:!0,maxLength:82})}),N.pk&&r.a.createElement("span",null,"Use a valid input"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"u-full-width"},r.a.createElement("label",{htmlFor:"address"},"Your account address"),r.a.createElement("input",{name:"address",className:"u-full-width",value:w,disabled:!0,ref:x({required:!0,maxLength:82})}),N.address&&r.a.createElement("span",null,"Use a valid input"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"u-full-width"},r.a.createElement("label",{htmlFor:"valueBet"},"Your bet in ETH"),r.a.createElement("input",{name:"valueBet",className:"u-full-width",type:"number",step:"0.000000000000001",ref:x({required:!0,maxLength:82})}),N.valueBet&&r.a.createElement("span",null,"Use a valid input"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"u-full-width"},r.a.createElement("label",{htmlFor:"goalPurchase"},"Why do I need it? "),r.a.createElement("input",{name:"goalPurchase",className:"u-full-width",ref:x({required:!0,maxLength:82})}),N.goalPurchase&&r.a.createElement("span",null,"Use a valid input"))),r.a.createElement("input",{className:"button-primary",type:"submit",value:"Make Bet"})),r.a.createElement("div",null,"Hash mint transaction:  ",o)))},V=function(e){var t=Object(a.useState)(0),n=Object(l.a)(t,2),s=n[0],i=n[1],c=Object(a.useState)([]),u=Object(l.a)(c,2),o=u[0],m=u[1],y=e.drizzle,f=e.drizzleState,b=y.contracts.EncNft,v=y.contracts.MarketPlace,h=Object(a.useState)(""),w=Object(l.a)(h,2),T=w[0],O=w[1],g=Object(a.useState)(0),j=Object(l.a)(g,2),k=j[0],x=j[1],S=Object(a.useState)(!1),N=Object(l.a)(S,2),z=N[0],M=N[1],F=Object(a.useState)(!1),I=Object(l.a)(F,2),D=I[0],P=I[1];Object(a.useEffect)(function(){f.accounts[0]&&K()},[f.accounts[0]]);var A=function(){var e=Object(d.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return x(t.idNft),e.next=3,E(f.accounts[0]);case 3:(n=e.sent)&&(O(n),M(!0));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(d.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.methods.moveTokenForSell(t.idNft,"Advertise of token ".concat(t.idNft)).send({from:f.accounts[0],gasLimit:15e4});case 2:n=e.sent,console.log("\ud83d\ude80 ~ file: MarketPlace.js ~ line 30 ~ transferNFT ~ result",n);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(d.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.methods.approve(v.address,t.idNft).send({from:f.accounts[0],gasLimit:15e4});case 2:n=e.sent,console.log("\ud83d\ude80 ~ file: MarketPlace.js ~ line 51 ~ result ~ result",n);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(d.a)(p.a.mark(function e(){var t,n,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.methods.totalSupply().call({from:f.accounts[0]});case 2:if((t=e.sent)>0){for(i(t),n=[],a=1;a<=t;a++)n.push({idNft:a,owner:"",approved:!1,isTokenForSell:!1,name:"",description:"",image:""});n.map(function(){var e=Object(d.a)(p.a.mark(function e(t){var n,a,r,s;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.methods.ownerOf(t.idNft).call({from:f.accounts[0]});case 2:if(!(n=e.sent)){e.next=14;break}return t.owner=n,e.next=7,b.methods.getApproved(t.idNft).call({from:f.accounts[0]});case 7:return a=e.sent,e.next=10,b.methods.tokenURI(t.idNft).call({from:f.accounts[0]});case 10:r=e.sent,a&&(t.approved=a===v.address),r&&(s=JSON.parse(r),t=Object(B.a)(Object(B.a)({},t),s)),m(function(e){return[].concat(Object(H.a)(e),[t])});case 14:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return r.a.createElement("section",null,r.a.createElement("h2",null,"MarketPlace"),r.a.createElement("button",{className:"btn-sell",onClick:function(){return P(!D)}},D?"Hide NFT Board":"Show NFT Board"),D&&r.a.createElement(W.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID NFT"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Description"),r.a.createElement("th",null,"URI"),r.a.createElement("th",null,"Owner address"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,o.length==s?o.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.idNft),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.description),r.a.createElement("td",null,r.a.createElement("a",{href:e.image,target:"_blank"},"URL")),r.a.createElement("td",{className:f.accounts[0]===e.owner?"owner-address":null}," ",e.owner),r.a.createElement("td",null,f.accounts[0]===e.owner?e.approved?r.a.createElement("button",{className:"btn-for-sell",onClick:function(){return C(e)}},"Move NFT for sell place"):r.a.createElement("button",{className:"btn-approve",onClick:function(){return U(e)}},"Approve NFT for sell"):r.a.createElement("button",{className:"btn-bet",onClick:function(){return A(e)}}," Make BET")))}):r.a.createElement(r.a.Fragment,null))),r.a.createElement("section",null,z&&r.a.createElement(Q,{drizzle:y,drizzleState:f,idToken:k,pk:T,address:f.accounts[0],showForm:function(){return M},isShowForm:z})),r.a.createElement(J,{drizzle:y,drizzleState:f,nftOwnersDetails:o}))},X=Object(A.create)("https://ipfs.infura.io:5001/api/v0"),Z=function(e){var t=e.drizzle,n=e.drizzleState,s=Object(a.useState)([]),i=Object(l.a)(s,2),c=i[0],u=i[1],o=Object(a.useState)(""),m=Object(l.a)(o,2),y=m[0],f=m[1],b=Object(a.useState)(""),v=Object(l.a)(b,2),h=(v[0],v[1],Object(a.useState)("")),E=Object(l.a)(h,2),w=E[0],T=E[1],O=Object(a.useState)(!1),g=Object(l.a)(O,2),j=g[0],k=g[1],x=Object(a.useState)(0),S=Object(l.a)(x,2),N=S[0],z=S[1],M=Object(a.useState)(null),F=Object(l.a)(M,2),I=F[0],D=F[1],A=t.contracts.EncNft,C=t.contracts.MarketPlace,U=["#text","#image","#file"],K=[{start:5,end:-3},{start:5,end:-3},{start:5,end:-3}];Object(a.useEffect)(function(){function e(){return(e=Object(d.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.methods.getIdsByAddress(n.accounts[0]).call({from:n.accounts[0]});case 2:t=e.sent,console.log("result   ",t),t&&t.length&&Promise.all(t.map(function(){var e=Object(d.a)(p.a.mark(function e(t){var a,r,s,i;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.methods.getOwnerInfo(t,n.accounts[0]).call({from:n.accounts[0]});case 2:return a=e.sent,e.next=5,A.methods.getTokenInfoLastOwner(t).call({from:n.accounts[0]});case 5:return r=e.sent,console.log(t,"\ud83d\ude80 ~ file: OwnerAssets.js ~ line 42 ~ result.map ~  currentOwnerInfo",r.encData,r.owner),e.next=9,A.methods.tokenURI(t).call({from:n.accounts[0]});case 9:s=e.sent,i=JSON.parse(s),console.log("\ud83d\ude80 ~ file: OwnerAssets.js ~ line 48 ~ result.map ~ parsedUri",i),u(function(e){return[].concat(Object(H.a)(e),[Object(B.a)({idToken:t,balance:a,currentOwner:r.owner,encPrivateKey:r.encData},i)])});case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())),console.log("sellerSoldAmounts :>> ",c);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[]),Object(a.useEffect)(function(){if(I){L(I.description);var e=I.image.split("/"),t=e[e.length-1];console.log("\ud83d\ude80 ~ file: OwnerAssets.js ~ line 60 ~ useEffect ~ cidPath",t),function(){var e=Object(d.a)(p.a.mark(function e(t){var n,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.object.get(t,{timeout:6e4});case 2:n=e.sent,console.log("\ud83d\ude80 ~ file: OwnerAssets.js ~ line 66 ~ getInfoFromIPFS ~ result",n),console.log("typeData :>> ",N),console.log("cutParams[typeData].start, cutParams[typeData].end :>> ",K[N].start,K[N].end),a=(new TextDecoder).decode(n.Data).slice(K[N].start,K[N].end),T(a);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()(t)}},[I]);var R=function(){var e=Object(d.a)(p.a.mark(function e(t){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.methods.sellerWithdrawSum(t).send({from:n.accounts[0],gasPrice:5*Math.pow(10,10),gasLimit:4e5});case 2:a=e.sent,console.log("\ud83d\ude80 ~ file: OwnerAssets.js ~ line 57 ~ result ~ result",a);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),L=function(e){console.log("\ud83d\ude80 ~ file: OwnerAssets.js ~ line 78 ~ getTypeDataFromDescription ~ description",e),U.map(function(t,n){e.includes(t)&&(console.log("\ud83d\ude80 ~ file: OwnerAssets.js ~ line 80 ~ typeFileNames.map ~ ind",n),console.log("\ud83d\ude80 ~ file: OwnerAssets.js ~ line 81 ~ typeFileNames.map ~ name",t),z(n))})},_=function(){var e=Object(d.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("\ud83d\ude80 ~ file: OwnerAssets.js ~ line 85 ~ decryptInfo ~ token",t),I&&I===t&&!j||(D(t),L(t.description),k(!0));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)(function(){I&&I.encPrivateKey!==y&&(f(I.encPrivateKey),L(I.description),k(!0))},[_,I,j]);return r.a.createElement("section",null,r.a.createElement("h2",null,"Your assets"),r.a.createElement(W.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID NFT"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Description"),r.a.createElement("th",null,"Sum for withdraw"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,c.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.idToken),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.description),r.a.createElement("td",null,e.balance),r.a.createElement("td",null,e.balance>0?r.a.createElement("button",{className:"btn-withdraw",onClick:function(){return R(e.idToken)}},"Withdraw"):(a=e.currentOwner,s=n.accounts[0],a===s?r.a.createElement("button",{className:"btn-decrypt",onClick:function(){return _(e)}},"Decrypt data of the NFT "):"You sold the token and withdraw all sum")));var a,s}))),j&&r.a.createElement(P,{drizzle:t,drizzleState:n,encData:w,encPrivateKey:y,typeData:N,showDialod:function(e){k(e)}}))},$=function(e){e.drizzle,e.drizzleState;return r.a.createElement("section",null,r.a.createElement("h2",null,"Contacts"))},ee=function(e){var t=Object(a.useState)({drizzleState:null,loading:!0}),n=Object(l.a)(t,2),s=n[0],i=n[1],o=e.drizzle;return Object(a.useEffect)(function(){var e=o.store.subscribe(function(){var e=o.store.getState();e.drizzleStatus.initialized&&i({drizzleState:e,loading:!1})});return function(){e()}},[o.store,s]),s.loading?r.a.createElement("div",{align:"center"},r.a.createElement("h4",null,r.a.createElement("a",{href:"https://metamask.io/",target:"_blank",rel:"noopener noreferrer"},"Please install Metamask extension and reload the page")),"Set it on the rinkeby test network"):r.a.createElement(c.a,null,r.a.createElement("div",null,r.a.createElement("div",{className:"title_logo"},r.a.createElement("img",{src:"assets/enc-nft-logo.png"}),r.a.createElement("h1",null,"Encoded NFT")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("nav",{className:"menu"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(c.b,{className:"link",to:"/"},"Market Place")),r.a.createElement("li",null,r.a.createElement(c.b,{className:"link",to:"/assets"},"Owner Assets")),r.a.createElement("li",null,r.a.createElement(c.b,{className:"link",to:"/upload-ipfs"},"Upload a file to IPFS")),r.a.createElement("li",null,r.a.createElement(c.b,{className:"link",to:"/contacts"},"Contacts")))),r.a.createElement("hr",null),r.a.createElement("br",null),r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/"},r.a.createElement(V,{drizzle:o,drizzleState:s.drizzleState})),r.a.createElement(u.a,{path:"/assets"},r.a.createElement(Z,{drizzle:o,drizzleState:s.drizzleState})),r.a.createElement(u.a,{path:"/upload-ipfs"},r.a.createElement(L,{drizzle:o,drizzleState:s.drizzleState})),r.a.createElement(u.a,{path:"/download-ipfs"},r.a.createElement(_,{drizzle:o,drizzleState:s.drizzleState})),r.a.createElement(u.a,{path:"/contacts"},r.a.createElement($,{drizzle:o,drizzleState:s.drizzleState})))))},te=n(397),ne=n(398),ae=n(399),re=new v.a(window.web3.currentProvider),se={contracts:[{contractName:"EncNft",web3Contract:new re.eth.Contract(ae.abi,"0xd7d366cF18D57c6aFC62Fd16FDbBBab08066988F")},{contractName:"MarketPlace",web3Contract:new re.eth.Contract(ne.abi,"0x7680956dFC896f00bedD1Dc1285e1B1c56c327EE")}],web3:{block:!1,customProvider:new v.a(window.web3.currentProvider)},polls:{accounts:2e3}},ie=new te.Drizzle(se);i.a.render(r.a.createElement(ee,{drizzle:ie}),document.getElementById("root"))}},[[402,1,2]]]);
//# sourceMappingURL=main.2ce1866f.chunk.js.map