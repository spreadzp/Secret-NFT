(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{397:function(e){e.exports={contractName:"MarketPlace",abi:[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"idToken",type:"uint256"},{indexed:!1,internalType:"address",name:"buyerAddress",type:"address"},{indexed:!1,internalType:"uint256",name:"bet",type:"uint256"}],name:"BuyerMadeBet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"idToken",type:"uint256"},{indexed:!1,internalType:"address",name:"buyerAddress",type:"address"},{indexed:!1,internalType:"uint256",name:"bet",type:"uint256"}],name:"BuyerWithdrewBet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"idToken",type:"uint256"},{indexed:!1,internalType:"address",name:"buyerAddress",type:"address"}],name:"NewOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"idToken",type:"uint256"},{indexed:!1,internalType:"address",name:"buyerAddress",type:"address"},{indexed:!1,internalType:"string",name:"message",type:"string"}],name:"TokenForSell",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"idToken",type:"uint256"},{indexed:!1,internalType:"address",name:"sellerAddress",type:"address"},{indexed:!1,internalType:"uint256",name:"sum",type:"uint256"}],name:"sellerWithdrewSum",type:"event"},{inputs:[{internalType:"uint256",name:"idToken",type:"uint256"},{internalType:"address",name:"buyerAddress",type:"address"},{internalType:"bytes",name:"data",type:"bytes"}],name:"acceptRateAndTransferToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"idToken",type:"uint256"}],name:"buyerWithdrawBet",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],name:"buyersBoard",outputs:[{internalType:"address",name:"buyerAddress",type:"address"},{internalType:"string",name:"buyerPublicKey",type:"string"},{internalType:"uint256",name:"buyerBet",type:"uint256"},{internalType:"string",name:"goalOfPurchase",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"idToken",type:"uint256"},{internalType:"address",name:"buyerAddress",type:"address"}],name:"getBuyerIndex",outputs:[{internalType:"uint256",name:"buyerIndex",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"idToken",type:"uint256"}],name:"getBuyersById",outputs:[{components:[{internalType:"address",name:"buyerAddress",type:"address"},{internalType:"string",name:"buyerPublicKey",type:"string"},{internalType:"uint256",name:"buyerBet",type:"uint256"},{internalType:"string",name:"goalOfPurchase",type:"string"}],internalType:"struct MarketPlace.BuyerData[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"idToken",type:"uint256"}],name:"getCountBuyers",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"idToken",type:"uint256"}],name:"getCountSellers",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"address",name:"owner",type:"address"}],name:"getOwnerInfo",outputs:[{internalType:"string",name:"balance",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"idToken",type:"uint256"}],name:"getSellerById",outputs:[{components:[{internalType:"address",name:"sellerAddress",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint256",name:"sellerSum",type:"uint256"}],internalType:"struct MarketPlace.SellerData[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"idToken",type:"uint256"},{internalType:"address",name:"sellerAddress",type:"address"}],name:"getSellerIndex",outputs:[{internalType:"uint256",name:"sellerIndex",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"idToken",type:"uint256"},{internalType:"string",name:"buyerPublicKey",type:"string"},{internalType:"address",name:"buyerAddress",type:"address"},{internalType:"string",name:"goalPurchase",type:"string"}],name:"makeBet",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"idToken",type:"uint256"},{internalType:"string",name:"message",type:"string"}],name:"moveTokenForSell",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"ownwerContract",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"idToken",type:"uint256"},{internalType:"string",name:"message",type:"string"}],name:"removeTokenFromMarketPlace",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"idToken",type:"uint256"}],name:"sellerWithdrawSum",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],name:"sellersBoard",outputs:[{internalType:"address",name:"sellerAddress",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint256",name:"sellerSum",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}]}},398:function(e){e.exports={contractName:"EncNft",abi:[{inputs:[{internalType:"string",name:"_name",type:"string"},{internalType:"string",name:"_symbol",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"getIdsByAddress",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"getTokenInfoLastOwner",outputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"string",name:"encData",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"string",name:"tokenURI_",type:"string"},{internalType:"string",name:"decryptKeyForOwner",type:"string"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"baseURI_",type:"string"}],name:"setBaseURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],name:"tokenHistoryEncryption",outputs:[{internalType:"address",name:"currentOwner",type:"address"},{internalType:"string",name:"encryptKeyForOwner",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"tokenOwnersOfToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"},{internalType:"address",name:"ownerToken",type:"address"}],name:"transferTokenWithEncryption",outputs:[],stateMutability:"nonpayable",type:"function"}]}},401:function(e,t,n){e.exports=n(921)},406:function(e,t,n){},409:function(e,t){},416:function(e,t){},420:function(e,t){},445:function(e,t){},447:function(e,t){},460:function(e,t){},462:function(e,t){},498:function(e,t){},499:function(e,t){},518:function(e,t){},526:function(e,t){},580:function(e,t){},611:function(e,t){},613:function(e,t){},703:function(e,t){},712:function(e,t){},728:function(e,t){},729:function(e,t){},921:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(106),i=n.n(s),c=(n(406),n(13)),l=n(162),u=n(46),o=n(2),p=n.n(o),d=n(16),m=n(75),y=n(161),f=n(392),b=n(143),v=n.n(b),h=n(161);function w(e){return E.apply(this,arguments)}function E(){return(E=Object(d.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){window.ethereum.sendAsync({jsonrpc:"2.0",method:"eth_getEncryptionPublicKey",params:[t]},function(t,a){t?n(t):e(a.result)})}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function g(e,t){return T.apply(this,arguments)}function T(){return(T=Object(d.a)(p.a.mark(function e(t,n){var a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,h.encryptWithPublicKey(n,t);case 3:return a=e.sent,console.log("\ud83d\ude80 ~ file: metamask.js ~ line 30 ~ metamaskEncrypt ~ encrypted",a),r=h.cipher.stringify(a),e.abrupt("return",r);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function O(e,t){return j.apply(this,arguments)}function j(){return(j=Object(d.a)(p.a.mark(function e(t,n){var a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("\ud83d\ude80 ~ file: metamask.js ~ line 41 ~ metamaskEncrypt ~ pubKey",n),console.log(t),a=Object(f.encrypt)(n,{data:t},"x25519-xsalsa20-poly1305"),console.log("\ud83d\ude80 ~ file: metamask.js ~ line 31 ~ metamaskEncrypt ~ enc",a),r=v.a.utils.toHex(JSON.stringify(a)),console.log("\ud83d\ude80 ~ file: metamask.js ~ line 54 ~ metamaskEncrypt ~ encryptedMessage",r),e.abrupt("return",r);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}var k=function(e){return e.then(function(e){return[e,void 0]}).catch(function(e){return Promise.resolve([void 0,e])})};function x(e,t){return S.apply(this,arguments)}function S(){return(S=Object(d.a)(p.a.mark(function e(t,n){var a,r,s,i;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("encryptedMessage: ".concat(t)),e.next=3,k(window.ethereum.request({method:"eth_decrypt",params:[t,n]}));case 3:if(a=e.sent,r=Object(c.a)(a,2),s=r[0],!(i=r[1])){e.next=11;break}console.error(i.message),e.next=13;break;case 11:return console.log("decryptedMessage: ".concat(s)),e.abrupt("return",s);case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function N(e,t){return M.apply(this,arguments)}function M(){return(M=Object(d.a)(p.a.mark(function e(t,n){var a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("encryptedMessage: ".concat(t)),a=h.cipher.parse(t),e.next=4,h.decryptWithPrivateKey(n,a);case 4:return r=e.sent,console.log("\ud83d\ude80 ~ file: metamask.js ~ line 85 ~ decryptMessage ~ message",r),e.abrupt("return",r);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function z(){return B.apply(this,arguments)}function B(){return(B=Object(d.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.ethereum.selectedAddress;case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function P(e,t){return A.apply(this,arguments)}function A(){return(A=Object(d.a)(p.a.mark(function e(t,n){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t);case 2:return a=e.sent,console.log("\ud83d\ude80 ~ file: cypher.js ~ line 19 ~ encrypt ~ pk",a),e.next=6,O(n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}var F=function(e){e.drizzle;var t=e.drizzleState,n=e.encData,s=e.encPrivateKey,i=Object(a.useState)(""),l=Object(c.a)(i,2),u=l[0],o=l[1],y=(t.contracts.Coupoken,Object(a.useState)("")),f=Object(c.a)(y,2),b=f[0],v=f[1],h=Object(a.useState)(""),w=Object(c.a)(h,2),E=w[0],g=w[1],T=Object(a.useState)(!1),O=Object(c.a)(T,2),j=O[0],k=O[1],S=Object(a.useState)(!1),M=Object(c.a)(S,2),z=M[0],B=M[1],P=Object(m.a)(),A=(P.register,P.handleSubmit,P.watch,P.errors);Object(a.useEffect)(function(){o(n)},[n]),Object(a.useEffect)(function(){console.log("decPk :>> ",z),console.log("encPrivateKey :>> ",s),z&&function(){var e=Object(d.a)(p.a.mark(function e(){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""===s){e.next=6;break}return e.next=3,x(s,t.accounts[0]);case 3:n=e.sent,console.log("\ud83d\ude80 ~ file: SetDecrypt.js ~ line 20 ~ decryptMessage ~ decMessage",n),v(n);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[z,s]),Object(a.useEffect)(function(){console.log("decryptedPK && encData :>> ",b,n),b&&n&&function(){var e=Object(d.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(n,b);case 2:t=e.sent,console.log("\ud83d\ude80 ~ file: SetDecrypt.js ~ line 20 ~ decryptMessage ~ decMessage",t),g(t);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[b,n]);return r.a.createElement("section",null,r.a.createElement("h2",null,"Download a file from IPFS"),r.a.createElement("div",null,u),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"six columns"},r.a.createElement("label",{htmlFor:"decrypredData"},"Encrypted Data"),r.a.createElement("div",{name:"decrypredData",className:"u-full-width"},E))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"u-full-width"},r.a.createElement("label",{htmlFor:"mURI"},"Read the file and decrypt"),r.a.createElement("input",{type:"file",name:"fileToDecrypt",className:"u-full-width",onChange:function(e){var t=e.target.files[0],n=new FileReader;n.readAsText(t),n.onload=function(e){var t=e.target.result;o(t)}}}),A.fileToDecrypt&&r.a.createElement("span",null,"Use a valid input"))),r.a.createElement("button",{onClick:function(){return B(!z)}},"DECRYPT PK"),r.a.createElement("button",{onClick:function(){return k(!j)}},"DECRYPT FILE"),r.a.createElement("h2",null,"Decrypted PK"),r.a.createElement("div",null,b),r.a.createElement("h2",null,"Decrypted file info"),r.a.createElement("div",null,E))},I=n(188),D=n(22),C=function(e){var t=Object(a.useState)(null),n=Object(c.a)(t,2),s=n[0],i=(n[1],Object(a.useState)("")),l=Object(c.a)(i,2),u=(l[0],l[1],Object(a.useState)("")),o=Object(c.a)(u,2),y=o[0],f=o[1],b=Object(a.useState)(""),v=Object(c.a)(b,2),h=(v[0],v[1],Object(a.useState)(0)),w=Object(c.a)(h,2),E=w[0],g=w[1],T=e.drizzle,O=e.drizzleState,j=e.ipfsLink,k=e.encryptedKey,x=T.contracts.EncNft,S=Object(m.a)(),N=S.register,M=S.handleSubmit,z=(S.watch,S.errors);Object(a.useEffect)(function(){function e(){return(e=Object(d.a)(p.a.mark(function e(){var t,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.methods.totalSupply().call({from:O.accounts[0]});case 2:t=e.sent,console.log("result !== countTokens :>> ",t,E),+t!==E&&(n=+t,console.log("\ud83d\ude80 ~ file: MintNFT.js ~ line 28 ~ countOfTokens ~ numResult",n),g(n),console.log("countTokens :>> ",E));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[]);var B=function(){var e=Object(d.a)(p.a.mark(function e(t){var n,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=A(t),console.log("\ud83d\ude80 ~ file: MintNFT.js ~ line 19 ~ onSubmit ~ stringUri",n),e.next=4,x.methods.mint(O.accounts[0],E+1,n,k).send({from:O.accounts[0]});case 4:(a=e.sent)&&(console.log("\ud83d\ude80 ~ file: MintNFT.js ~ line 21 ~ onSubmit ~ resMint",a),f(a.transactionHash));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(d.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("countTokens :>> ",E),e.next=3,x.methods.approve(T.contracts.MarketPlace.address,E).send({from:O.accounts[0],gasPrice:5*Math.pow(10,10),gasLimit:4e5});case 3:(t=e.sent)&&(console.log("\ud83d\ude80 ~ file: MintNFT.js ~ line 45 ~ approveNft ~ res",t),F());case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),A=function(e){var t=Object(D.a)(Object(D.a)({},e),{},{image:j});return JSON.stringify(t)},F=function(){var e=O.transactions,t=O.transactionStack[s];return t?"Transaction status: ".concat(e[t]&&e[t].status):null};return r.a.createElement("section",null,r.a.createElement("div",null,"Mint new NFT to owner"),r.a.createElement("form",{onSubmit:M(B)},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"u-full-width"},r.a.createElement("label",{htmlFor:"mNft"},"Name"),r.a.createElement("input",{name:"name",className:"u-full-width",placeholder:"Test NFT",ref:N({required:!0,maxLength:42})}),z.name&&r.a.createElement("span",null,"Use a valid input"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"u-full-width"},r.a.createElement("label",{htmlFor:"mNft"},"Description of the NFT"),r.a.createElement("input",{name:"description",className:"u-full-width",placeholder:"string data",ref:N({required:!1,maxLength:8e3})}),z.description&&r.a.createElement("span",null,"Use a valid input"))),r.a.createElement("input",{className:"button-primary",type:"submit",value:"Mint"})),r.a.createElement("div",null,"Hash mint transaction:  ",y),r.a.createElement("button",{onClick:function(){return P()}},"Approve to MarketPlace contract"))},K=Object(I.create)("https://ipfs.infura.io:5001/api/v0"),U=function(e){var t=Object(a.useState)(""),n=Object(c.a)(t,2),s=n[0],i=n[1],l=Object(a.useState)(null),u=Object(c.a)(l,2),o=(u[0],u[1],Object(a.useState)("")),f=Object(c.a)(o,2),b=f[0],v=f[1],h=Object(a.useState)(""),w=Object(c.a)(h,2),E=w[0],T=w[1],O=Object(a.useState)(""),j=Object(c.a)(O,2),k=j[0],x=j[1],S=Object(a.useState)(""),N=Object(c.a)(S,2),M=(N[0],N[1]),B=e.drizzle,A=e.drizzleState,I=Object(a.useState)(""),D=Object(c.a)(I,2),U=D[0],R=D[1],L=Object(a.useState)(""),_=Object(c.a)(L,2),W=_[0],q=_[1],H=Object(a.useState)(""),Y=Object(c.a)(H,2),J=Y[0],G=Y[1],V=Object(a.useState)(""),Q=Object(c.a)(V,2),X=Q[0],Z=Q[1],$=Object(a.useState)(""),ee=Object(c.a)($,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(""),re=Object(c.a)(ae,2),se=re[0],ie=re[1],ce=Object(m.a)(),le=ce.register,ue=ce.handleSubmit,oe=(ce.watch,ce.errors);function pe(){return(pe=Object(d.a)(p.a.mark(function e(t){var n,a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.files[0],e.prev=1,e.next=4,K.add(n);case 4:a=e.sent,r="https://ipfs.infura.io/ipfs/".concat(a.path),i(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("Error uploading file: ",e.t0);case 12:case"end":return e.stop()}},e,null,[[1,9]])}))).apply(this,arguments)}var de=function(){var e=Object(d.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(se,J);case 2:""!==(t=e.sent)&&x(t);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),me=function(){var e=Object(d.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("value.address-to-encrypt :>> ",t.addressToEncrypt,t.dataToEncrypt),M(t.addressToEncrypt),console.log("newPublicKey :>> ",X),console.log("clearData :>> ",b),e.next=6,g(t.dataToEncrypt||b,X);case 6:""!==(n=e.sent)&&T(n);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)(Object(d.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z();case 2:(t=e.sent)&&ie(t);case 4:case"end":return e.stop()}},e)})),[z,ie]),Object(a.useEffect)(function(){E&&se&&function(){var e=Object(d.a)(p.a.mark(function e(){var t,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.add(E);case 2:t=e.sent,R(t.path),n="https://ipfs.infura.io/ipfs/".concat(t.path),i(n);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[E,se]);var ye=function(){var e=Object(d.a)(p.a.mark(function e(){var t,n,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=7;break}return e.next=3,K.object.get(U,{timeout:3e4});case 3:t=e.sent,n=(new TextDecoder).decode(t.Data).slice(0,-3),a=n.slice(5),q(a);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=y.default.createIdentity();G(e.privateKey),Z(e.publicKey),ne(e.address)};return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"IPFS Example"),r.a.createElement("section",null,r.a.createElement("h2",null,"Encryption private key via owner public key"),r.a.createElement("button",{onClick:function(){return fe()}},"Generate keys for encryption a file"),r.a.createElement("div",null,"Private, public, address"),r.a.createElement("div",null,"pk: ",J),r.a.createElement("div",null,"pubkey: ",X),r.a.createElement("div",null,"add: ",te),r.a.createElement("div",null,"Creator address",se),r.a.createElement("button",{onClick:function(){return de()}},"Encrypt private key via new owner public key"),r.a.createElement("div",null,"Encrypted private key"),r.a.createElement("div",null,k),r.a.createElement("br",null),r.a.createElement("h2",null,"Encrypt a file via generated public key for NFT URI "),r.a.createElement("form",{onSubmit:ue(function(e){me(e)})},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"u-full-width"},r.a.createElement("label",{htmlFor:"mURI"},"Data for encryption"),r.a.createElement("input",{name:"dataToEncrypt",className:"u-full-width",placeholder:"string data",ref:le({required:!1,maxLength:8e3})}),oe.dataToEncrypt&&r.a.createElement("span",null,"Use a valid input"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"u-full-width"},r.a.createElement("label",{htmlFor:"mURI"},"Upload"),r.a.createElement("input",{type:"file",name:"fileToEncrypt",className:"u-full-width",onChange:function(e){var t=e.target.files[0],n=new FileReader;n.readAsText(t),n.onload=function(e){var t=e.target.result;v(t)}}}),oe.fileToEncrypt&&r.a.createElement("span",null,"Use a valid input"))),r.a.createElement("input",{className:"button-primary",type:"submit",value:"Submit"})),r.a.createElement("div",null,E),r.a.createElement(F,{drizzle:B,drizzleState:A,encData:E,encPrivateKey:k})),r.a.createElement("input",{type:"file",onChange:function(e){return pe.apply(this,arguments)}}),r.a.createElement("a",{href:s},s),r.a.createElement("button",{onClick:function(){return ye()}},"Get Info from IPFS"),r.a.createElement("div",null,W),r.a.createElement(C,{drizzle:B,drizzleState:A,ipfsLink:s,encryptedKey:k}))},R=function(e){e.drizzle;var t=e.drizzleState,n=e.encData,s=Object(a.useState)(""),i=Object(c.a)(s,2),l=i[0],u=i[1],o=(t.contracts.Coupoken,Object(a.useState)("")),y=Object(c.a)(o,2),f=y[0],b=y[1],v=Object(a.useState)(""),h=Object(c.a)(v,2),w=h[0],E=h[1],g=Object(a.useState)(!1),T=Object(c.a)(g,2),O=T[0],j=T[1],k=Object(m.a)(),S=(k.register,k.handleSubmit,k.watch,k.errors);Object(a.useEffect)(function(){u(n)},[n]),Object(a.useEffect)(function(){O&&function(){var e=Object(d.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""===l){e.next=6;break}return e.next=3,x(l,"0x4D1E260E63e9331C4552991874dA4FBF4Aa6A3df");case 3:t=e.sent,console.log("\ud83d\ude80 ~ file: SetDecrypt.js ~ line 20 ~ decryptMessage ~ decMessage",t),b(t);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[O]),Object(a.useEffect)(function(){w&&function(){var e=Object(d.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""===l){e.next=6;break}return e.next=3,N(l,"0x4D1E260E63e9331C4552991874dA4FBF4Aa6A3df");case 3:t=e.sent,console.log("\ud83d\ude80 ~ file: SetDecrypt.js ~ line 20 ~ decryptMessage ~ decMessage",t),E(t);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[O,w]);return r.a.createElement("section",null,r.a.createElement("h2",null,"Download a file from IPFS"),r.a.createElement("div",null,l),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"six columns"},r.a.createElement("label",{htmlFor:"decrypredData"},"Encrypted Data"),r.a.createElement("div",{name:"decrypredData",className:"u-full-width"},w))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"u-full-width"},r.a.createElement("label",{htmlFor:"mURI"},"Read the file and decrypt"),r.a.createElement("input",{type:"file",name:"fileToDecrypt",className:"u-full-width",onChange:function(e){var t=e.target.files[0],n=new FileReader;n.readAsText(t),n.onload=function(e){var t=e.target.result;u(t)}}}),S.fileToDecrypt&&r.a.createElement("span",null,"Use a valid input"))),r.a.createElement("button",{onClick:function(){return j(!O)}},"DECRYPT"),r.a.createElement("h2",null,"Decrypted PK"),r.a.createElement("div",null,f),r.a.createElement("h2",null,"Decrypted file info"),r.a.createElement("div",null,w))},L=n(37),_=n(926),W=(n(911),n(927)),q=n(929),H=n(928),Y=function(e){var t=Object(a.useState)(null),n=Object(c.a)(t,2),s=(n[0],n[1],Object(a.useState)("")),i=Object(c.a)(s,2),l=(i[0],i[1],Object(a.useState)("")),u=Object(c.a)(l,2),o=u[0],y=u[1],f=Object(a.useState)(""),b=Object(c.a)(f,2),v=(b[0],b[1],e.drizzle),h=e.drizzleState,w=e.pk,E=e.address,g=e.idToken,T=v.contracts.MarketPlace,O=Object(m.a)(),j=O.register,k=O.handleSubmit,x=(O.watch,O.errors),S=O.setFocus,N=function(){var e=Object(d.a)(p.a.mark(function e(t){var n,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("\ud83d\ude80 ~ file: BetForm.js ~ line 19 ~ onSubmit ~ data",t),n=q.a.from(H.a.parseUnits(t.valueBet,18)),console.log("\ud83d\ude80 ~ file: BetForm.js ~ line 24 ~ onSubmit ~ bnValue",n),e.next=5,T.methods.makeBet(g,w,h.accounts[0],t.goalPurchase).send({from:h.accounts[0],value:n,gasPrice:10*Math.pow(10,10),gasLimit:4e5});case 5:(a=e.sent)&&(console.log("\ud83d\ude80 ~ file: MintNFT.js ~ line 21 ~ onSubmit ~ resMint",a),y(a.transactionHash));case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)(function(){},[S]),Object(a.useEffect)(function(){},[T]);return r.a.createElement("section",null,r.a.createElement("div",null,"Bet params"),r.a.createElement("form",{onSubmit:k(N)},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"u-full-width"},r.a.createElement("label",{htmlFor:"mNft"},"Id token"),r.a.createElement("input",{name:"tokenId",className:"u-full-width",value:g,disabled:!0,ref:j({required:!0,maxLength:82})}),x.tokenId&&r.a.createElement("span",null,"Use a valid input"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"u-full-width"},r.a.createElement("label",{htmlFor:"pk"},"Public key of your account"),r.a.createElement("input",{name:"pk",className:"u-full-width",value:w,disabled:!0,ref:j({required:!0,maxLength:82})}),x.pk&&r.a.createElement("span",null,"Use a valid input"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"u-full-width"},r.a.createElement("label",{htmlFor:"address"},"Your account address"),r.a.createElement("input",{name:"address",className:"u-full-width",value:E,disabled:!0,ref:j({required:!0,maxLength:82})}),x.address&&r.a.createElement("span",null,"Use a valid input"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"u-full-width"},r.a.createElement("label",{htmlFor:"valueBet"},"Your bet"),r.a.createElement("input",{name:"valueBet",className:"u-full-width",type:"number",step:"0.000000000000001",ref:j({required:!0,maxLength:82})}),x.valueBet&&r.a.createElement("span",null,"Use a valid input"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"u-full-width"},r.a.createElement("label",{htmlFor:"goalPurchase"},"Why do I need it? "),r.a.createElement("input",{name:"goalPurchase",className:"u-full-width",ref:j({required:!0,maxLength:82})}),x.goalPurchase&&r.a.createElement("span",null,"Use a valid input"))),r.a.createElement("input",{className:"button-primary",type:"submit",value:"Make Bet"})),r.a.createElement("div",null,"Hash mint transaction:  ",o))},J=function(e){var t=Object(a.useState)(null),n=Object(c.a)(t,2),s=(n[0],n[1],Object(a.useState)(0)),i=Object(c.a)(s,2),l=(i[0],i[1]),u=Object(a.useState)([]),o=Object(c.a)(u,2),m=o[0],y=o[1],f=Object(a.useState)(""),b=Object(c.a)(f,2),v=(b[0],b[1],Object(a.useState)(0)),h=Object(c.a)(v,2),w=(h[0],h[1],e.drizzle),E=e.drizzleState,g=e.nftOwnersDetails,T=w.contracts.EncNft,j=w.contracts.MarketPlace,k=Object(a.useState)(!1),S=Object(c.a)(k,2),N=(S[0],S[1],Object(a.useState)(-1)),M=Object(c.a)(N,2),z=M[0],B=M[1];Object(a.useEffect)(function(){P()},[]);var P=function(){var e=Object(d.a)(p.a.mark(function e(){var t,n,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.methods.totalSupply().call({from:E.accounts[0]});case 2:if((t=e.sent)>0){for(l(t),n=[],a=1;a<=t;a++)n.push({idNft:a,owner:"",name:"",description:"",image:""});console.log("tokensArray   :>> ",n),n.map(function(){var e=Object(d.a)(p.a.mark(function e(t){var n,a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.methods.ownerOf(t.idNft).call({from:E.accounts[0]});case 2:return e.sent,e.next=5,T.methods.tokenURI(t.idNft).call({from:E.accounts[0]});case 5:return e.sent,e.prev=6,e.next=9,j.methods.getCountBuyers(t.idNft).call({from:E.accounts[0]});case 9:if(n=e.sent,console.log("\ud83d\ude80 ~ file: BuyersBoard.js ~ line 66 ~ getBuyers ~ countBuyers",n),!(n>0)){e.next=19;break}a=p.a.mark(function e(n){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.methods.buyersBoard(t.idNft,n).call({from:E.accounts[0]});case 2:(a=e.sent)&&(console.log("\ud83d\ude80 ~ file: BuyersBoard.js ~ line 55 ~ getBuyers ~ buyersMakeBet",a),y(function(e){return[].concat(Object(L.a)(e),[{idToken:t.idNft,buyerAddress:a[0],buyerPubKey:a[1],buyerBet:a[2],goalPurchase:a[3]}])}),console.log("nftBuyersDetails  :>> ",m));case 4:case"end":return e.stop()}},e)}),r=0;case 14:if(!(r<n)){e.next=19;break}return e.delegateYield(a(r),"t0",16);case 16:r++,e.next=14;break;case 19:e.next=24;break;case 21:e.prev=21,e.t1=e.catch(6),console.log("\ud83d\ude80 ~ file: BuyersBoard.js ~ line 72 ~ getBuyers ~ error",e.t1);case 24:case"end":return e.stop()}},e,null,[[6,21]])}));return function(t){return e.apply(this,arguments)}}())}case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(d.a)(p.a.mark(function e(t,n){var a,r,s,i,c;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("\ud83d\ude80 ~ file: BuyersBoard.js ~ line 85 ~ sellNft ~ buyer",t),n.owner!==E.accounts[0]){e.next=23;break}return e.next=4,T.methods.getTokenInfoLastOwner(n.idNft).call({from:E.accounts[0]});case 4:return a=e.sent,console.log("\ud83d\ude80 ~ file: BuyersBoard.js ~ line 78 ~ sellNft ~ ownerOfTokenInfo",a),r=a.encData,console.log("\ud83d\ude80 ~ file: BuyersBoard.js ~ line 79 ~ sellNft ~ lastEncryptedPrivateKey",r),e.next=10,x(r,E.accounts[0]);case 10:if(s=e.sent,console.log("\ud83d\ude80 ~ file: BuyersBoard.js ~ line 81 ~ sellNft ~ encryptedPrivateKey",s),console.log("buyer.buyerPubKey  :>> ",t.buyerPubKey,t),!s){e.next=23;break}return e.next=16,O(s,t.buyerPubKey);case 16:if(""===(i=e.sent)){e.next=23;break}return console.log("\ud83d\ude80 ~ file: BuyersBoard.js ~ line 85 ~ sellNft ~ encData",i),e.next=21,j.methods.acceptRateAndTransferToken(n.idNft,t.buyerAddress,i).send({from:E.accounts[0],gasPrice:10*Math.pow(10,10),gasLimit:6e5});case 21:c=e.sent,console.log("\ud83d\ude80 ~ file: BuyersBoard.js ~ line 65 ~ sellNft ~ sellInfo",c);case 23:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),F=function(e){return r.a.createElement(_.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("th",null," Buyer address "),r.a.createElement("th",null," Buyer rate "),r.a.createElement("th",null," Why do I need it "),r.a.createElement("th",null," Action ")),r.a.createElement("tbody",null," ",m.filter(function(t){return t.idToken===e.idNft}).map(function(t){return t.buyerBet>0&&r.a.createElement("tr",null,r.a.createElement("th",{className:t.buyerAddress===E.accounts[0]?"owner-address":null}," ",t.buyerAddress," ")," ",r.a.createElement("th",null,H.a.formatEther(t.buyerBet),"ETH"),r.a.createElement("th",null," ",t.goalPurchase," "),r.a.createElement("th",null,function(e,t){return t.owner===E.accounts[0]&&t.approved?t.owner!==E.accounts[0]||t.approved?r.a.createElement("button",{onClick:function(){return A(e,t)}},"Sell NFT"):"Need to approve to sell":""}(t,e)," "))})," "))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null," Buyers Board "),r.a.createElement(W.a,{defaultActiveKey:"0"}," ",g.map(function(e,t){return r.a.createElement(W.a.Item,{eventKey:t},r.a.createElement(W.a.Header,{onClick:function(){return B(t)}}," ID NFT: ",e.idNft," ",e.name," "),r.a.createElement(W.a.Body,{className:z===t?"active":"inactive"},r.a.createElement("div",null," ",e.description," ")," ",F(e))," ")})))},G=function(e){var t=Object(a.useState)(null),n=Object(c.a)(t,2),s=(n[0],n[1],Object(a.useState)(0)),i=Object(c.a)(s,2),l=i[0],u=i[1],o=Object(a.useState)([]),m=Object(c.a)(o,2),y=m[0],f=m[1],b=e.drizzle,v=e.drizzleState,h=b.contracts.EncNft,E=b.contracts.MarketPlace,g=Object(a.useState)(""),T=Object(c.a)(g,2),O=T[0],j=T[1],k=Object(a.useState)(0),x=Object(c.a)(k,2),S=x[0],N=x[1],M=Object(a.useState)(!1),z=Object(c.a)(M,2),B=z[0],P=z[1];Object(a.useEffect)(function(){D()},[]);var A=function(){var e=Object(d.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return N(t.idNft),e.next=3,w(v.accounts[0]);case 3:n=e.sent,console.log("\ud83d\ude80 ~ file: BuyersBoard.js ~ line 29 ~ makeBet ~ pk",n),n&&(j(n),P(!0));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(d.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.methods.moveTokenForSell(t.idNft,"Advertise of token ".concat(t.idNft)).send({from:v.accounts[0],gasLimit:15e4});case 2:n=e.sent,console.log("\ud83d\ude80 ~ file: MarketPlace.js ~ line 30 ~ transferNFT ~ result",n);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(d.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.methods.approve(E.address,t.idNft).send({from:v.accounts[0],gasLimit:15e4});case 2:n=e.sent,console.log("\ud83d\ude80 ~ file: MarketPlace.js ~ line 51 ~ result ~ result",n);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(d.a)(p.a.mark(function e(){var t,n,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.methods.totalSupply().call({from:v.accounts[0]});case 2:if((t=e.sent)>0){for(u(t),n=[],a=1;a<=t;a++)n.push({idNft:a,owner:"",approved:!1,isTokenForSell:!1});n.map(function(){var e=Object(d.a)(p.a.mark(function e(t){var n,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.methods.ownerOf(t.idNft).call({from:v.accounts[0]});case 2:if(!(n=e.sent)){e.next=13;break}return t.owner=n,console.log("\ud83d\ude80 ~ file: MarketPlace.js ~ line 34 ~ getCoupons ~ ownerAddress",n),e.next=8,h.methods.getApproved(t.idNft).call({from:v.accounts[0]});case 8:a=e.sent,console.log("\ud83d\ude80 ~ file: MarketPlace.js ~ line 59 ~ getCoupons ~ approvedAddress",a),a&&(console.log("contractMarket.address :>> ",E.address),t.approved=a===E.address),f(function(e){return[].concat(Object(L.a)(e),[t])}),console.log("# ###nftOwnersDetails :>> ",y);case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)(function(){console.log("totalAmountNft  :>> ",l),console.log("nftOwnersDetails.length :>> ",y.length),console.log("nftOwnersDetails.length === totalAmountNft :>> ",y.length===l),y.length==l&&console.log(" @@@@totalAmountNft  :>> ",l)},[y.length]);return r.a.createElement("section",null,r.a.createElement("h2",null,"MarketPlace"),r.a.createElement(_.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID NFT"),r.a.createElement("th",null,"Owner address"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,y.length==l?y.map(function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,e.idNft),r.a.createElement("td",{className:v.accounts[0]===e.owner?"owner-address":null}," ",e.owner),r.a.createElement("td",null,v.accounts[0]===e.owner?e.approved?r.a.createElement("button",{onClick:function(){return F(e)}},"Move NFT for sell place"):r.a.createElement("button",{onClick:function(){return I(e)}},"Approve NFT for sell"):r.a.createElement("button",{onClick:function(){return A(e)}}," Make BET")))}):r.a.createElement(r.a.Fragment,null))),r.a.createElement("section",null,B&&r.a.createElement(Y,{drizzle:b,drizzleState:v,idToken:S,pk:O,address:v.accounts[0]})),r.a.createElement(J,{drizzle:b,drizzleState:v,nftOwnersDetails:y}))},V=Object(I.create)("https://ipfs.infura.io:5001/api/v0"),Q=function(e){var t=e.drizzle,n=e.drizzleState,s=e.encData,i=(e.encPrivateKey,Object(a.useState)("")),l=Object(c.a)(i,2),u=(l[0],l[1]),o=(n.contracts.Coupoken,Object(a.useState)("")),y=Object(c.a)(o,2),f=(y[0],y[1],Object(a.useState)("")),b=Object(c.a)(f,2),v=b[0],h=b[1],w=Object(a.useState)(!1),E=Object(c.a)(w,2),g=(E[0],E[1],Object(a.useState)(0)),T=Object(c.a)(g,2),O=(T[0],T[1],Object(a.useState)([])),j=Object(c.a)(O,2),k=(j[0],j[1],Object(a.useState)([])),S=Object(c.a)(k,2),M=S[0],z=S[1],B=Object(a.useState)(""),P=Object(c.a)(B,2),A=(P[0],P[1],Object(a.useState)(!1)),F=Object(c.a)(A,2),I=(F[0],F[1],Object(m.a)()),C=(I.register,I.handleSubmit,I.watch,I.errors,t.contracts.EncNft),K=t.contracts.MarketPlace;Object(a.useEffect)(function(){u(s)},[s]),Object(a.useEffect)(function(){function e(){return(e=Object(d.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.methods.getIdsByAddress(n.accounts[0]).call({from:n.accounts[0]});case 2:t=e.sent,console.log("result   ",t),t&&t.length&&Promise.all(t.map(function(){var e=Object(d.a)(p.a.mark(function e(t){var a,r,s,i;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.methods.getOwnerInfo(t,n.accounts[0]).call({from:n.accounts[0]});case 2:return a=e.sent,e.next=5,C.methods.getTokenInfoLastOwner(t).call({from:n.accounts[0]});case 5:return r=e.sent,console.log(t,"\ud83d\ude80 ~ file: OwnerAssets.js ~ line 42 ~ result.map ~  currentOwnerInfo",r.encData,r.owner),e.next=9,C.methods.tokenURI(t).call({from:n.accounts[0]});case 9:s=e.sent,i=JSON.parse(s),console.log("\ud83d\ude80 ~ file: OwnerAssets.js ~ line 48 ~ result.map ~ parsedUri",i),z(function(e){return[].concat(Object(L.a)(e),[Object(D.a)({idToken:t,balance:a,currentOwner:r.owner,encPrivateKey:r.encData},i)])});case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())),console.log("sellerSoldAmounts :>> ",M);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[]);var U=function(){var e=Object(d.a)(p.a.mark(function e(t){var n,a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.object.get(t,{timeout:3e4});case 2:return n=e.sent,a=(new TextDecoder).decode(n.Data).slice(0,-3),r=a.slice(5),console.log("\ud83d\ude80 ~ file: OwnerAssets.js ~ line 66 ~ getInfoFromIPFS ~ cuttedString",r),e.abrupt("return",r);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(d.a)(p.a.mark(function e(t){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.methods.sellerWithdrawSum(t).send({from:n.accounts[0],gasPrice:5*Math.pow(10,10),gasLimit:4e5});case 2:a=e.sent,console.log("\ud83d\ude80 ~ file: OwnerAssets.js ~ line 57 ~ result ~ result",a);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(d.a)(p.a.mark(function e(t){var a,r,s;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("\ud83d\ude80 ~ file: OwnerAssets.js ~ line 71 ~ decryptInfo ~ token",t),e.next=3,x(t.encPrivateKey,n.accounts[0]);case 3:if(a=e.sent,console.log("\ud83d\ude80 ~ file: SetDecrypt.js ~ line 20 ~ decryptMessage ~ decMessage",a),!a){e.next=17;break}return console.log("token.image.slice(28) :>> ",t.image.slice(28)),e.next=9,U(t.image.slice(28));case 9:if(r=e.sent,console.log("\ud83d\ude80 ~ file: OwnerAssets.js ~ line 86 ~ decryptInfo ~ cutTextFromIpfsFIle",r),!r){e.next=17;break}return e.next=14,N(r,a);case 14:s=e.sent,console.log("\ud83d\ude80 ~ file: SetDecrypt.js ~ line 20 ~ decryptMessage ~ decMessage",s),h(s);case 17:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("section",null,r.a.createElement("h2",null,"Your assets"),r.a.createElement("h3",null,"Sold tokens "),r.a.createElement(_.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID NFT"),r.a.createElement("th",null,"Sum"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,M.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.idToken),r.a.createElement("td",null,e.balance),r.a.createElement("td",null,e.balance>0?r.a.createElement("button",{onClick:function(){return R(e.idToken)}},"Withdraw")?function(e,t){console.log("add1 === add2 :>> ",e,t);var n=e===t;return console.log("\ud83d\ude80 ~ file:  OwnerAssets.js ~ line 68 ~ compareAddresses ~ res",n),n}(e.currentOwner,n.accounts[0]):"You sold the token":r.a.createElement("button",{onClick:function(){return W(e)}},"Decrypt the file to see it ")))}))),r.a.createElement("div",null,"Decrypted: ",v))},X=function(e){var t=Object(a.useState)({drizzleState:null,loading:!0}),n=Object(c.a)(t,2),s=n[0],i=n[1],o=e.drizzle;return Object(a.useEffect)(function(){var e=o.store.subscribe(function(){var e=o.store.getState();e.drizzleStatus.initialized&&i({drizzleState:e,loading:!1})});return function(){e()}},[o.store,s]),s.loading?r.a.createElement("div",{align:"center"},r.a.createElement("h4",null,r.a.createElement("a",{href:"https://metamask.io/",target:"_blank",rel:"noopener noreferrer"},"Please install Metamask extension and reload the page")),"Set it on the rinkeby test network"):r.a.createElement(l.a,null,r.a.createElement("div",null,r.a.createElement("div",{className:"title_logo"},r.a.createElement("img",{src:"https://www.devoleum.com/47fa9787d0791533e573aed32e8147a9.png"}),r.a.createElement("h1",null,"Secret NFT")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("nav",{className:"menu"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(l.b,{to:"/"},"Market Place")),r.a.createElement("li",null,r.a.createElement(l.b,{to:"/assets"},"Owner Assets")),r.a.createElement("li",null,r.a.createElement(l.b,{to:"/upload-ipfs"},"Upload a file to IPFS")))),r.a.createElement("hr",null),r.a.createElement("br",null),r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/"},r.a.createElement(G,{drizzle:o,drizzleState:s.drizzleState})),r.a.createElement(u.a,{path:"/assets"},r.a.createElement(Q,{drizzle:o,drizzleState:s.drizzleState})),r.a.createElement(u.a,{path:"/upload-ipfs"},r.a.createElement(U,{drizzle:o,drizzleState:s.drizzleState})),r.a.createElement(u.a,{path:"/download-ipfs"},r.a.createElement(R,{drizzle:o,drizzleState:s.drizzleState})))))},Z=n(396),$=n(397),ee=n(398),te=new v.a(window.web3.currentProvider),ne={contracts:[{contractName:"EncNft",web3Contract:new te.eth.Contract(ee.abi,"0x8C151518F690a51aC559eB2eA5A4A6e7AFA75F82")},{contractName:"MarketPlace",web3Contract:new te.eth.Contract($.abi,"0xD91f649c4301F9840D2442D3D412C8c014CB0F2A")}],web3:{block:!1,customProvider:new v.a(window.web3.currentProvider)},polls:{accounts:2e3}},ae=new Z.Drizzle(ne);i.a.render(r.a.createElement(X,{drizzle:ae}),document.getElementById("root"))}},[[401,1,2]]]);
//# sourceMappingURL=main.dea3a5a1.chunk.js.map