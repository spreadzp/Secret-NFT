(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{398:function(e){e.exports={contractName:"MarketPlace",abi:[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"idToken",type:"uint256"},{indexed:!1,internalType:"address",name:"buyerAddress",type:"address"},{indexed:!1,internalType:"uint256",name:"bet",type:"uint256"}],name:"BuyerMadeBet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"idToken",type:"uint256"},{indexed:!1,internalType:"address",name:"buyerAddress",type:"address"},{indexed:!1,internalType:"uint256",name:"bet",type:"uint256"}],name:"BuyerWithdrewBet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"idToken",type:"uint256"},{indexed:!1,internalType:"address",name:"buyerAddress",type:"address"}],name:"NewOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"idToken",type:"uint256"},{indexed:!1,internalType:"address",name:"buyerAddress",type:"address"},{indexed:!1,internalType:"string",name:"message",type:"string"}],name:"TokenForSell",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"idToken",type:"uint256"},{indexed:!1,internalType:"address",name:"sellerAddress",type:"address"},{indexed:!1,internalType:"uint256",name:"sum",type:"uint256"}],name:"sellerWithdrewSum",type:"event"},{inputs:[{internalType:"uint256",name:"idToken",type:"uint256"},{internalType:"address",name:"buyerAddress",type:"address"},{internalType:"bytes",name:"data",type:"bytes"}],name:"acceptRateAndTransferToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"idToken",type:"uint256"}],name:"buyerWithdrawBet",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],name:"buyersBoard",outputs:[{internalType:"address",name:"buyerAddress",type:"address"},{internalType:"string",name:"buyerPublicKey",type:"string"},{internalType:"uint256",name:"buyerBet",type:"uint256"},{internalType:"string",name:"goalOfPurchase",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"idToken",type:"uint256"},{internalType:"address",name:"buyerAddress",type:"address"}],name:"getBuyerIndex",outputs:[{internalType:"uint256",name:"buyerIndex",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"idToken",type:"uint256"}],name:"getBuyersById",outputs:[{components:[{internalType:"address",name:"buyerAddress",type:"address"},{internalType:"string",name:"buyerPublicKey",type:"string"},{internalType:"uint256",name:"buyerBet",type:"uint256"},{internalType:"string",name:"goalOfPurchase",type:"string"}],internalType:"struct MarketPlace.BuyerData[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"idToken",type:"uint256"}],name:"getCountBuyers",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"idToken",type:"uint256"}],name:"getCountSellers",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"address",name:"owner",type:"address"}],name:"getOwnerInfo",outputs:[{internalType:"string",name:"balance",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"idToken",type:"uint256"}],name:"getSellerById",outputs:[{components:[{internalType:"address",name:"sellerAddress",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint256",name:"sellerSum",type:"uint256"}],internalType:"struct MarketPlace.SellerData[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"idToken",type:"uint256"},{internalType:"address",name:"sellerAddress",type:"address"}],name:"getSellerIndex",outputs:[{internalType:"uint256",name:"sellerIndex",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"idToken",type:"uint256"},{internalType:"string",name:"buyerPublicKey",type:"string"},{internalType:"address",name:"buyerAddress",type:"address"},{internalType:"string",name:"goalPurchase",type:"string"}],name:"makeBet",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"idToken",type:"uint256"},{internalType:"string",name:"message",type:"string"}],name:"moveTokenForSell",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"ownwerContract",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"idToken",type:"uint256"},{internalType:"string",name:"message",type:"string"}],name:"removeTokenFromMarketPlace",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"idToken",type:"uint256"}],name:"sellerWithdrawSum",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],name:"sellersBoard",outputs:[{internalType:"address",name:"sellerAddress",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint256",name:"sellerSum",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}]}},399:function(e){e.exports={contractName:"EncNft",abi:[{inputs:[{internalType:"string",name:"_name",type:"string"},{internalType:"string",name:"_symbol",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"getIdsByAddress",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"getTokenInfoLastOwner",outputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"string",name:"encData",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"string",name:"tokenURI_",type:"string"},{internalType:"string",name:"decryptKeyForOwner",type:"string"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"baseURI_",type:"string"}],name:"setBaseURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],name:"tokenHistoryEncryption",outputs:[{internalType:"address",name:"currentOwner",type:"address"},{internalType:"string",name:"encryptKeyForOwner",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"tokenOwnersOfToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"},{internalType:"address",name:"ownerToken",type:"address"}],name:"transferTokenWithEncryption",outputs:[],stateMutability:"nonpayable",type:"function"}]}},402:function(e,t,n){e.exports=n(923)},407:function(e,t,n){},410:function(e,t){},417:function(e,t){},421:function(e,t){},446:function(e,t){},448:function(e,t){},461:function(e,t){},463:function(e,t){},499:function(e,t){},500:function(e,t){},519:function(e,t){},527:function(e,t){},581:function(e,t){},612:function(e,t){},614:function(e,t){},704:function(e,t){},713:function(e,t){},729:function(e,t){},730:function(e,t){},923:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(107),i=n.n(s),c=(n(407),n(14)),l=n(146),u=n(49),o=n(2),p=n.n(o),d=n(18),m=n(81),y=n(162),f=n(393),b=n(143),v=n.n(b),h=n(162);function w(e){return E.apply(this,arguments)}function E(){return(E=Object(d.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){window.ethereum.sendAsync({jsonrpc:"2.0",method:"eth_getEncryptionPublicKey",params:[t]},function(t,a){t?n(t):e(a.result)})}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function T(e,t){return O.apply(this,arguments)}function O(){return(O=Object(d.a)(p.a.mark(function e(t,n){var a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,h.encryptWithPublicKey(n,t);case 3:return a=e.sent,console.log("\ud83d\ude80 ~ file: metamask.js ~ line 30 ~ metamaskEncrypt ~ encrypted",a),r=h.cipher.stringify(a),e.abrupt("return",r);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function g(e,t){return j.apply(this,arguments)}function j(){return(j=Object(d.a)(p.a.mark(function e(t,n){var a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("\ud83d\ude80 ~ file: metamask.js ~ line 41 ~ metamaskEncrypt ~ pubKey",n),console.log(t),a=Object(f.encrypt)(n,{data:t},"x25519-xsalsa20-poly1305"),console.log("\ud83d\ude80 ~ file: metamask.js ~ line 31 ~ metamaskEncrypt ~ enc",a),r=v.a.utils.toHex(JSON.stringify(a)),console.log("\ud83d\ude80 ~ file: metamask.js ~ line 54 ~ metamaskEncrypt ~ encryptedMessage",r),e.abrupt("return",r);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}var k=function(e){return e.then(function(e){return[e,void 0]}).catch(function(e){return Promise.resolve([void 0,e])})};function x(e,t){return S.apply(this,arguments)}function S(){return(S=Object(d.a)(p.a.mark(function e(t,n){var a,r,s,i;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(window.ethereum.request({method:"eth_decrypt",params:[t,n]}));case 2:if(a=e.sent,r=Object(c.a)(a,2),s=r[0],!(i=r[1])){e.next=10;break}console.error(i.message),e.next=12;break;case 10:return console.log("decryptedMessage: ".concat(s)),e.abrupt("return",s);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function N(e,t){return z.apply(this,arguments)}function z(){return(z=Object(d.a)(p.a.mark(function e(t,n){var a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("encryptedMessage: ".concat(t)),a=h.cipher.parse(t),e.next=4,h.decryptWithPrivateKey(n,a);case 4:return r=e.sent,console.log("\ud83d\ude80 ~ file: metamask.js ~ line 85 ~ decryptMessage ~ message",r),e.abrupt("return",r);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function M(){return F.apply(this,arguments)}function F(){return(F=Object(d.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.ethereum.selectedAddress;case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function A(e,t){return I.apply(this,arguments)}function I(){return(I=Object(d.a)(p.a.mark(function e(t,n){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t);case 2:return a=e.sent,console.log("\ud83d\ude80 ~ file: cypher.js ~ line 19 ~ encrypt ~ pk",a),e.next=6,g(n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}var P=function(e){e.drizzle;var t=e.drizzleState,n=e.encData,s=e.encPrivateKey,i=e.typeData,l=e.showDialod,u=Object(a.useState)(""),o=Object(c.a)(u,2),y=(o[0],o[1]),f=Object(a.useState)(""),b=Object(c.a)(f,2),v=b[0],h=b[1],w=Object(a.useState)(""),E=Object(c.a)(w,2),T=E[0],O=E[1],g=Object(a.useState)(!1),j=Object(c.a)(g,2),k=j[0],S=j[1],z=Object(a.useState)(!1),M=Object(c.a)(z,2),F=(M[0],M[1]),A=Object(m.a)();A.register,A.handleSubmit,A.watch,A.errors;Object(a.useEffect)(function(){y(n)},[n]),Object(a.useEffect)(function(){k&&function(){var e=Object(d.a)(p.a.mark(function e(){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""===s){e.next=7;break}return e.next=3,x(s,t.accounts[0]);case 3:n=e.sent,console.log("\ud83d\ude80 ~ file: SetDecrypt.js ~ line 20 ~ decryptMessage ~ decMessage",n),h(n),F(!0);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[k,s]),Object(a.useEffect)(function(){v&&n&&function(){var e=Object(d.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(n,v);case 2:t=e.sent,O(t);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[v,n]);var I;return r.a.createElement("section",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"six columns"},r.a.createElement("label",{htmlFor:"decrypredData"},"Encrypted Data"),(I=i,r.a.createElement(r.a.Fragment,null,"0"==I&&r.a.createElement("div",{name:"decrypredData",className:"u-full-width"},T),"1"==I&&r.a.createElement("div",null,r.a.createElement("img",{name:"decrypredData",className:"u-full-width",src:T})))))),r.a.createElement("button",{onClick:function(){return S(!k)}},"Decrypt Data"),r.a.createElement("button",{onClick:function(){return l(!1)}},"close"))},D=n(188),B=n(11),C=function(e){var t=Object(a.useState)(null),n=Object(c.a)(t,2),s=n[0],i=(n[1],Object(a.useState)("")),l=Object(c.a)(i,2),u=(l[0],l[1],Object(a.useState)("")),o=Object(c.a)(u,2),y=o[0],f=o[1],b=Object(a.useState)(""),v=Object(c.a)(b,2),h=(v[0],v[1],Object(a.useState)(0)),w=Object(c.a)(h,2),E=w[0],T=w[1],O=e.drizzle,g=e.drizzleState,j=e.ipfsLink,k=e.encryptedKey,x=e.typeData,S=O.contracts.EncNft,N=Object(m.a)(),z=N.register,M=N.handleSubmit,F=(N.watch,N.errors);Object(a.useEffect)(function(){function e(){return(e=Object(d.a)(p.a.mark(function e(){var t,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.methods.totalSupply().call({from:g.accounts[0]});case 2:t=e.sent,console.log("result !== countTokens :>> ",t,E),+t!==E&&(n=+t,console.log("\ud83d\ude80 ~ file: MintNFT.js ~ line 28 ~ countOfTokens ~ numResult",n),T(n),console.log("countTokens :>> ",E));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[]);var A=function(){var e=Object(d.a)(p.a.mark(function e(t){var n,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=P(t),console.log("\ud83d\ude80 ~ file: MintNFT.js ~ line 19 ~ onSubmit ~ stringUri",n),e.next=4,S.methods.mint(g.accounts[0],E+1,n,k).send({from:g.accounts[0]});case 4:(a=e.sent)&&(console.log("\ud83d\ude80 ~ file: MintNFT.js ~ line 21 ~ onSubmit ~ resMint",a),f(a.transactionHash));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(d.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("countTokens :>> ",E),e.next=3,S.methods.approve(O.contracts.MarketPlace.address,E).send({from:g.accounts[0],gasPrice:5*Math.pow(10,10),gasLimit:4e5});case 3:(t=e.sent)&&(console.log("\ud83d\ude80 ~ file: MintNFT.js ~ line 45 ~ approveNft ~ res",t),D());case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),P=function(e){console.log("typeData :>> ",x),0==x&&(e.description+=" #text"),1==x&&(e.description+=" #image"),console.log("\ud83d\ude80 ~ file: MintNFT.js ~ line 56 ~ data",e);var t=Object(B.a)(Object(B.a)({},e),{},{image:j});return JSON.stringify(t)},D=function(){var e=g.transactions,t=g.transactionStack[s];return t?"Transaction status: ".concat(e[t]&&e[t].status):null};return r.a.createElement("section",null,r.a.createElement("div",null,"Mint new NFT to owner"),r.a.createElement("form",{onSubmit:M(A)},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"u-full-width"},r.a.createElement("label",{htmlFor:"mNft"},"Name"),r.a.createElement("input",{name:"name",className:"u-full-width",placeholder:"Test NFT",ref:z({required:!0,maxLength:42})}),F.name&&r.a.createElement("span",null,"Use a valid input"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"u-full-width"},r.a.createElement("label",{htmlFor:"mNft"},"Description of the NFT"),r.a.createElement("input",{name:"description",className:"u-full-width",placeholder:"string data",ref:z({required:!1,maxLength:8e3})}),F.description&&r.a.createElement("span",null,"Use a valid input"))),r.a.createElement("input",{className:"button-primary",type:"submit",value:"Mint"})),r.a.createElement("div",null,"Hash mint transaction:  ",y),r.a.createElement("button",{onClick:function(){return I()}},"Approve to MarketPlace contract"))},U=(n(912),n(930)),K=Object(D.create)("https://ipfs.infura.io:5001/api/v0"),L=[{value:0,label:"text"},{value:1,label:"image"},{value:2,label:"video"},{value:3,label:"audio"}],R=function(e){var t=Object(a.useState)(""),n=Object(c.a)(t,2),s=n[0],i=n[1],l=Object(a.useState)(null),u=Object(c.a)(l,2),o=(u[0],u[1],Object(a.useState)("")),f=Object(c.a)(o,2),b=f[0],v=f[1],h=Object(a.useState)(""),w=Object(c.a)(h,2),E=w[0],O=w[1],g=Object(a.useState)(""),j=Object(c.a)(g,2),k=j[0],x=j[1],S=Object(a.useState)(""),N=Object(c.a)(S,2),z=(N[0],N[1]),F=e.drizzle,I=e.drizzleState,D=Object(a.useState)(""),B=Object(c.a)(D,2),R=B[0],_=B[1],W=Object(a.useState)(""),q=Object(c.a)(W,2),H=q[0],Y=q[1],J=Object(a.useState)(""),G=Object(c.a)(J,2),Q=G[0],V=G[1],X=Object(a.useState)(""),Z=Object(c.a)(X,2),$=Z[0],ee=Z[1],te=Object(a.useState)(""),ne=Object(c.a)(te,2),ae=ne[0],re=ne[1],se=Object(a.useState)(""),ie=Object(c.a)(se,2),ce=ie[0],le=ie[1],ue=Object(a.useState)(0),oe=Object(c.a)(ue,2),pe=(oe[0],oe[1],Object(a.useState)(L[0].value)),de=Object(c.a)(pe,2),me=de[0],ye=de[1],fe=Object(a.useState)(""),be=Object(c.a)(fe,2),ve=be[0],he=be[1],we=Object(m.a)(),Ee=we.register,Te=we.handleSubmit,Oe=(we.watch,we.errors);function ge(){return(ge=Object(d.a)(p.a.mark(function e(t){var n,a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.files[0],e.prev=1,e.next=4,K.add(n);case 4:a=e.sent,r="https://ipfs.infura.io/ipfs/".concat(a.path),i(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("Error uploading file: ",e.t0);case 12:case"end":return e.stop()}},e,null,[[1,9]])}))).apply(this,arguments)}var je=function(){var e=Object(d.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(ce,Q);case 2:""!==(t=e.sent)&&x(t);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),ke=function(){var e=Object(d.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("clearData :>> ",b),z(t.addressToEncrypt),e.next=4,T(t.dataToEncrypt||b||ve,$);case 4:""!==(n=e.sent)&&O(n);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)(Object(d.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:(t=e.sent)&&le(t);case 4:case"end":return e.stop()}},e)})),[M,le]),Object(a.useEffect)(function(){E&&ce&&function(){var e=Object(d.a)(p.a.mark(function e(){var t,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.add(E);case 2:t=e.sent,_(t.path),n="https://ipfs.infura.io/ipfs/".concat(t.path),i(n);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[E,ce]);var xe=function(){var e=Object(d.a)(p.a.mark(function e(){var t,n,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=7;break}return e.next=3,K.object.get(R,{timeout:3e4});case 3:t=e.sent,n=(new TextDecoder).decode(t.Data).slice(0,-3),a=n.slice(5),Y(a);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),Se=function(){var e=y.default.createIdentity();V(e.privateKey),ee(e.publicKey),re(e.address)};return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"IPFS Example"),r.a.createElement("section",null,r.a.createElement("h2",null,"Encryption private key via owner public key"),r.a.createElement("button",{onClick:function(){return Se()}},"Generate keys for encryption a file"),r.a.createElement("div",null,"Private, public, address"),r.a.createElement("div",null,"pk: ",Q),r.a.createElement("div",null,"pubkey: ",$),r.a.createElement("div",null,"add: ",ae),r.a.createElement("div",null,"Creator address",ce),r.a.createElement("button",{onClick:function(){return je()}},"Encrypt private key via new owner public key"),r.a.createElement("div",null,"Encrypted private key"),r.a.createElement("div",null,k),r.a.createElement("br",null),r.a.createElement("h2",null,"Encrypt a file via generated public key for NFT URI "),r.a.createElement("form",{onSubmit:Te(function(e){console.log("\ud83d\ude80 ~ file: UploadIPFS.js ~ line 48 ~ data",e),ke(e)})},r.a.createElement(U.a.Group,{className:"mb-3",controlId:"exampleForm.ControlSelect"},r.a.createElement(U.a.Select,{"aria-label":"Floating label select example",value:me,onChange:function(e){return t=e.target.value,void ye(t);var t}},L.map(function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.label)}))),"1"===me?r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1"},r.a.createElement("label",null,"Paste base64 string of the image"),r.a.createElement("textarea",{rows:8,value:ve,onChange:function(e){e&&e.target.value&&(he(e.target.value),v(e.target.event))}})),"1"===me&&r.a.createElement("input",{type:"button",onClick:function(){return window.open("https://www.base64-image.de/","_blank")},value:"toBase64"})):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"u-full-width"},r.a.createElement("label",{htmlFor:"mURI"},"Data for encryption"),r.a.createElement("input",{name:"dataToEncrypt",className:"u-full-width",placeholder:"string data",ref:Ee({required:!1,maxLength:8e4})}),Oe.dataToEncrypt&&r.a.createElement("span",null,"Use a valid input"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"u-full-width"},r.a.createElement("label",{htmlFor:"mURI"},"Upload"),r.a.createElement("input",{type:"file",id:"file1",name:"fileToEncrypt",className:"u-full-width",onChange:function(e){console.log("event.target :>> ",e.target.files);var t=e.target.files[0];console.log("selectedOption :>> ",me);var n=new FileReader;n.readAsText(t),n.onload=function(e){var t=e.target.result;console.log("\ud83d\ude80 ~ file: UploadIPFS.js ~ line 120 ~ onFileChange ~ fileAsText",t),v(t)},n.onerror=function(e){return console.error("Error: ",e)}}}),Oe.fileToEncrypt&&r.a.createElement("span",null,"Use a valid input")))),r.a.createElement("input",{className:"button-primary",type:"submit",value:"Submit"})),r.a.createElement(P,{drizzle:F,drizzleState:I,encData:E,encPrivateKey:k,typeData:me})),r.a.createElement("input",{type:"file",onChange:function(e){return ge.apply(this,arguments)}}),r.a.createElement("a",{href:s},s),r.a.createElement("button",{onClick:function(){return xe()}},"Get Info from IPFS"),r.a.createElement("div",null,H),r.a.createElement(C,{drizzle:F,drizzleState:I,ipfsLink:s,encryptedKey:k,typeData:me}))},_=function(e){e.drizzle;var t=e.drizzleState,n=e.encData,s=Object(a.useState)(""),i=Object(c.a)(s,2),l=i[0],u=i[1],o=(t.contracts.Coupoken,Object(a.useState)("")),y=Object(c.a)(o,2),f=y[0],b=y[1],v=Object(a.useState)(""),h=Object(c.a)(v,2),w=h[0],E=h[1],T=Object(a.useState)(!1),O=Object(c.a)(T,2),g=O[0],j=O[1],k=Object(m.a)(),S=(k.register,k.handleSubmit,k.watch,k.errors);Object(a.useEffect)(function(){u(n)},[n]),Object(a.useEffect)(function(){g&&function(){var e=Object(d.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""===l){e.next=6;break}return e.next=3,x(l,"0x4D1E260E63e9331C4552991874dA4FBF4Aa6A3df");case 3:t=e.sent,console.log("\ud83d\ude80 ~ file: SetDecrypt.js ~ line 20 ~ decryptMessage ~ decMessage",t),b(t);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[g]),Object(a.useEffect)(function(){w&&function(){var e=Object(d.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""===l){e.next=6;break}return e.next=3,N(l,"0x4D1E260E63e9331C4552991874dA4FBF4Aa6A3df");case 3:t=e.sent,console.log("\ud83d\ude80 ~ file: SetDecrypt.js ~ line 20 ~ decryptMessage ~ decMessage",t),E(t);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[g,w]);return r.a.createElement("section",null,r.a.createElement("h2",null,"Download a file from IPFS"),r.a.createElement("div",null,l),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"six columns"},r.a.createElement("label",{htmlFor:"decrypredData"},"Encrypted Data"),r.a.createElement("div",{name:"decrypredData",className:"u-full-width"},w))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"u-full-width"},r.a.createElement("label",{htmlFor:"mURI"},"Read the file and decrypt"),r.a.createElement("input",{type:"file",name:"fileToDecrypt",className:"u-full-width",onChange:function(e){var t=e.target.files[0],n=new FileReader;n.readAsText(t),n.onload=function(e){var t=e.target.result;u(t)}}}),S.fileToDecrypt&&r.a.createElement("span",null,"Use a valid input"))),r.a.createElement("button",{onClick:function(){return j(!g)}},"DECRYPT"),r.a.createElement("h2",null,"Decrypted PK"),r.a.createElement("div",null,f),r.a.createElement("h2",null,"Decrypted file info"),r.a.createElement("div",null,w))},W=n(40),q=n(928),H=(n(916),n(929)),Y=n(931),J=function(e){var t=Object(a.useState)(null),n=Object(c.a)(t,2),s=(n[0],n[1],Object(a.useState)(0)),i=Object(c.a)(s,2),l=(i[0],i[1]),u=Object(a.useState)([]),o=Object(c.a)(u,2),m=o[0],y=o[1],f=Object(a.useState)(""),b=Object(c.a)(f,2),v=(b[0],b[1],Object(a.useState)(0)),h=Object(c.a)(v,2),w=(h[0],h[1],e.drizzle),E=e.drizzleState,T=e.nftOwnersDetails,O=w.contracts.EncNft,j=w.contracts.MarketPlace,k=Object(a.useState)(!1),S=Object(c.a)(k,2),N=(S[0],S[1],Object(a.useState)(-1)),z=Object(c.a)(N,2),M=z[0],F=z[1];Object(a.useEffect)(function(){A()},[]);var A=function(){var e=Object(d.a)(p.a.mark(function e(){var t,n,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.methods.totalSupply().call({from:E.accounts[0]});case 2:if((t=e.sent)>0){for(l(t),n=[],a=1;a<=t;a++)n.push({idNft:a,owner:"",name:"",description:"",image:""});n.map(function(){var e=Object(d.a)(p.a.mark(function e(t){var n,a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.methods.getCountBuyers(t.idNft).call({from:E.accounts[0]});case 3:if(!((n=e.sent)>0)){e.next=12;break}a=p.a.mark(function e(n){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.methods.buyersBoard(t.idNft,n).call({from:E.accounts[0]});case 2:(a=e.sent)&&y(function(e){return[].concat(Object(W.a)(e),[{idToken:t.idNft,buyerAddress:a[0],buyerPubKey:a[1],buyerBet:a[2],goalPurchase:a[3]}])});case 4:case"end":return e.stop()}},e)}),r=0;case 7:if(!(r<n)){e.next=12;break}return e.delegateYield(a(r),"t0",9);case 9:r++,e.next=7;break;case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(0),console.log("\ud83d\ude80 ~ file: BuyersBoard.js ~ line 72 ~ getBuyers ~ error",e.t1);case 17:case"end":return e.stop()}},e,null,[[0,14]])}));return function(t){return e.apply(this,arguments)}}())}case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(d.a)(p.a.mark(function e(t,n){var a,r,s,i;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.owner!==E.accounts[0]){e.next=16;break}return e.next=3,O.methods.getTokenInfoLastOwner(n.idNft).call({from:E.accounts[0]});case 3:return a=e.sent,r=a.encData,e.next=7,x(r,E.accounts[0]);case 7:if(!(s=e.sent)){e.next=16;break}return e.next=11,g(s,t.buyerPubKey);case 11:if(""===(i=e.sent)){e.next=16;break}return e.next=15,j.methods.acceptRateAndTransferToken(n.idNft,t.buyerAddress,i).send({from:E.accounts[0],gasPrice:10*Math.pow(10,10),gasLimit:6e5});case 15:e.sent;case 16:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),P=function(e){return r.a.createElement(q.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null," Buyer address "),r.a.createElement("th",null," Buyer rate "),r.a.createElement("th",null," Why do I need it "),r.a.createElement("th",null," Action "))),r.a.createElement("tbody",null,m.filter(function(t){return t.idToken===e.idNft}).map(function(t,n){return t.buyerBet>0&&r.a.createElement("tr",{key:n},r.a.createElement("td",{className:t.buyerAddress===E.accounts[0]?"owner-address":null}," ",t.buyerAddress," "),r.a.createElement("td",null,Y.a.formatEther(t.buyerBet),"ETH"),r.a.createElement("td",null," ",t.goalPurchase," "),r.a.createElement("td",null,function(e,t){return t.owner===E.accounts[0]&&t.approved?t.owner!==E.accounts[0]||t.approved?r.a.createElement("button",{onClick:function(){return I(e,t)}},"Sell NFT"):"Need to approve to sell":""}(t,e)," "))})))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null," Buyers Boards "),r.a.createElement(H.a,{defaultActiveKey:"0"}," ",T.map(function(e,t){return r.a.createElement(H.a.Item,{eventKey:t,key:t},r.a.createElement(H.a.Header,{onClick:function(){return F(t)}}," ID NFT: ",e.idNft," ",e.name," "),r.a.createElement(H.a.Body,{className:M===t?"active":"inactive"},r.a.createElement("div",null," ",e.description," ")," ",P(e))," ")})))},G=n(932),Q=function(e){var t=Object(a.useState)(null),n=Object(c.a)(t,2),s=(n[0],n[1],Object(a.useState)("")),i=Object(c.a)(s,2),l=(i[0],i[1],Object(a.useState)("")),u=Object(c.a)(l,2),o=u[0],y=u[1],f=Object(a.useState)(""),b=Object(c.a)(f,2),v=(b[0],b[1],e.drizzle),h=e.drizzleState,w=e.pk,E=e.address,T=e.idToken,O=v.contracts.MarketPlace,g=Object(m.a)(),j=g.register,k=g.handleSubmit,x=(g.watch,g.errors),S=(g.setFocus,function(){var e=Object(d.a)(p.a.mark(function e(t){var n,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=G.a.from(Y.a.parseUnits(t.valueBet,18)),e.next=3,O.methods.makeBet(T,w,h.accounts[0],t.goalPurchase).send({from:h.accounts[0],value:n,gasPrice:10*Math.pow(10,10),gasLimit:4e5});case 3:(a=e.sent)&&y(a.transactionHash);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());return r.a.createElement("section",null,r.a.createElement("div",null,"Bet params"),r.a.createElement("form",{onSubmit:k(S)},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"u-full-width"},r.a.createElement("label",{htmlFor:"mNft"},"Id token"),r.a.createElement("input",{name:"tokenId",className:"u-full-width",value:T,disabled:!0,ref:j({required:!0,maxLength:82})}),x.tokenId&&r.a.createElement("span",null,"Use a valid input"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"u-full-width"},r.a.createElement("label",{htmlFor:"pk"},"Public key of your account"),r.a.createElement("input",{name:"pk",className:"u-full-width",value:w,disabled:!0,ref:j({required:!0,maxLength:82})}),x.pk&&r.a.createElement("span",null,"Use a valid input"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"u-full-width"},r.a.createElement("label",{htmlFor:"address"},"Your account address"),r.a.createElement("input",{name:"address",className:"u-full-width",value:E,disabled:!0,ref:j({required:!0,maxLength:82})}),x.address&&r.a.createElement("span",null,"Use a valid input"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"u-full-width"},r.a.createElement("label",{htmlFor:"valueBet"},"Your bet"),r.a.createElement("input",{name:"valueBet",className:"u-full-width",type:"number",step:"0.000000000000001",ref:j({required:!0,maxLength:82})}),x.valueBet&&r.a.createElement("span",null,"Use a valid input"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"u-full-width"},r.a.createElement("label",{htmlFor:"goalPurchase"},"Why do I need it? "),r.a.createElement("input",{name:"goalPurchase",className:"u-full-width",ref:j({required:!0,maxLength:82})}),x.goalPurchase&&r.a.createElement("span",null,"Use a valid input"))),r.a.createElement("input",{className:"button-primary",type:"submit",value:"Make Bet"})),r.a.createElement("div",null,"Hash mint transaction:  ",o))},V=function(e){var t=Object(a.useState)(null),n=Object(c.a)(t,2),s=(n[0],n[1],Object(a.useState)(0)),i=Object(c.a)(s,2),l=i[0],u=i[1],o=Object(a.useState)([]),m=Object(c.a)(o,2),y=m[0],f=m[1],b=e.drizzle,v=e.drizzleState,h=b.contracts.EncNft,E=b.contracts.MarketPlace,T=Object(a.useState)(""),O=Object(c.a)(T,2),g=O[0],j=O[1],k=Object(a.useState)(0),x=Object(c.a)(k,2),S=x[0],N=x[1],z=Object(a.useState)(!1),M=Object(c.a)(z,2),F=M[0],A=M[1];Object(a.useEffect)(function(){B()},[]);var I=function(){var e=Object(d.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return N(t.idNft),e.next=3,w(v.accounts[0]);case 3:(n=e.sent)&&(j(n),A(!0));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(d.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.methods.moveTokenForSell(t.idNft,"Advertise of token ".concat(t.idNft)).send({from:v.accounts[0],gasLimit:15e4});case 2:n=e.sent,console.log("\ud83d\ude80 ~ file: MarketPlace.js ~ line 30 ~ transferNFT ~ result",n);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(d.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.methods.approve(E.address,t.idNft).send({from:v.accounts[0],gasLimit:15e4});case 2:n=e.sent,console.log("\ud83d\ude80 ~ file: MarketPlace.js ~ line 51 ~ result ~ result",n);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(d.a)(p.a.mark(function e(){var t,n,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.methods.totalSupply().call({from:v.accounts[0]});case 2:if((t=e.sent)>0){for(u(t),n=[],a=1;a<=t;a++)n.push({idNft:a,owner:"",approved:!1,isTokenForSell:!1});n.map(function(){var e=Object(d.a)(p.a.mark(function e(t){var n,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.methods.ownerOf(t.idNft).call({from:v.accounts[0]});case 2:if(!(n=e.sent)){e.next=10;break}return t.owner=n,e.next=7,h.methods.getApproved(t.idNft).call({from:v.accounts[0]});case 7:(a=e.sent)&&(t.approved=a===E.address),f(function(e){return[].concat(Object(W.a)(e),[t])});case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return r.a.createElement("section",null,r.a.createElement("h2",null,"MarketPlace"),r.a.createElement(q.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID NFT"),r.a.createElement("th",null,"Owner address"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,y.length==l?y.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.idNft),r.a.createElement("td",{className:v.accounts[0]===e.owner?"owner-address":null}," ",e.owner),r.a.createElement("td",null,v.accounts[0]===e.owner?e.approved?r.a.createElement("button",{onClick:function(){return P(e)}},"Move NFT for sell place"):r.a.createElement("button",{onClick:function(){return D(e)}},"Approve NFT for sell"):r.a.createElement("button",{onClick:function(){return I(e)}}," Make BET")))}):r.a.createElement(r.a.Fragment,null))),r.a.createElement("section",null,F&&r.a.createElement(Q,{drizzle:b,drizzleState:v,idToken:S,pk:g,address:v.accounts[0]})),r.a.createElement(J,{drizzle:b,drizzleState:v,nftOwnersDetails:y}))},X=Object(D.create)("https://ipfs.infura.io:5001/api/v0"),Z=function(e){var t=e.drizzle,n=e.drizzleState,s=Object(a.useState)([]),i=Object(c.a)(s,2),l=i[0],u=i[1],o=Object(a.useState)(""),m=Object(c.a)(o,2),y=m[0],f=m[1],b=Object(a.useState)(""),v=Object(c.a)(b,2),h=(v[0],v[1],Object(a.useState)("")),w=Object(c.a)(h,2),E=w[0],T=w[1],O=Object(a.useState)(!1),g=Object(c.a)(O,2),j=g[0],k=g[1],x=Object(a.useState)(0),S=Object(c.a)(x,2),N=S[0],z=S[1],M=Object(a.useState)(null),F=Object(c.a)(M,2),A=F[0],I=F[1],D=t.contracts.EncNft,C=t.contracts.MarketPlace,U=["#text","#image","#qr"];Object(a.useEffect)(function(){function e(){return(e=Object(d.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.methods.getIdsByAddress(n.accounts[0]).call({from:n.accounts[0]});case 2:t=e.sent,console.log("result   ",t),t&&t.length&&Promise.all(t.map(function(){var e=Object(d.a)(p.a.mark(function e(t){var a,r,s,i;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.methods.getOwnerInfo(t,n.accounts[0]).call({from:n.accounts[0]});case 2:return a=e.sent,e.next=5,D.methods.getTokenInfoLastOwner(t).call({from:n.accounts[0]});case 5:return r=e.sent,console.log(t,"\ud83d\ude80 ~ file: OwnerAssets.js ~ line 42 ~ result.map ~  currentOwnerInfo",r.encData,r.owner),e.next=9,D.methods.tokenURI(t).call({from:n.accounts[0]});case 9:s=e.sent,i=JSON.parse(s),console.log("\ud83d\ude80 ~ file: OwnerAssets.js ~ line 48 ~ result.map ~ parsedUri",i),u(function(e){return[].concat(Object(W.a)(e),[Object(B.a)({idToken:t,balance:a,currentOwner:r.owner,encPrivateKey:r.encData},i)])});case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())),console.log("sellerSoldAmounts :>> ",l);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[]),Object(a.useEffect)(function(){if(A){var e=A.image.split("/"),t=e[e.length-1];console.log("\ud83d\ude80 ~ file: OwnerAssets.js ~ line 60 ~ useEffect ~ cidPath",t),function(){var e=Object(d.a)(p.a.mark(function e(t){var n,a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.object.get(t,{timeout:3e4});case 2:n=e.sent,a=(new TextDecoder).decode(n.Data).slice(0,-4),r=a.slice(6),console.log("\ud83d\ude80 ~ file: OwnerAssets.js ~ line 66 ~ getInfoFromIPFS ~ cuttedString",r),T(r);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()(t)}},[A]);var K=function(){var e=Object(d.a)(p.a.mark(function e(t){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.methods.sellerWithdrawSum(t).send({from:n.accounts[0],gasPrice:5*Math.pow(10,10),gasLimit:4e5});case 2:a=e.sent,console.log("\ud83d\ude80 ~ file: OwnerAssets.js ~ line 57 ~ result ~ result",a);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(d.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("\ud83d\ude80 ~ file: OwnerAssets.js ~ line 85 ~ decryptInfo ~ token",t),A&&A===t&&!j||(I(t),k(!0));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)(function(){var e;A&&A.encPrivateKey!==y&&(f(A.encPrivateKey),e=A.description,console.log("\ud83d\ude80 ~ file: OwnerAssets.js ~ line 78 ~ getTypeDataFromDescription ~ description",e),U.map(function(t,n){e.includes(t)&&(console.log("\ud83d\ude80 ~ file: OwnerAssets.js ~ line 80 ~ typeFileNames.map ~ ind",n),console.log("\ud83d\ude80 ~ file: OwnerAssets.js ~ line 81 ~ typeFileNames.map ~ name",t),z(n))}),k(!0),console.log("typeData :>> ",N),console.log("encryptedPrivateKey  :>> ",y))},[L,A,j]);return r.a.createElement("section",null,r.a.createElement("h2",null,"Your assets"),r.a.createElement("h3",null,"Sold tokens "),r.a.createElement(q.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID NFT"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Description"),r.a.createElement("th",null,"Sum"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,l.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.idToken),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.description),r.a.createElement("td",null,e.balance),r.a.createElement("td",null,e.balance>0?r.a.createElement("button",{onClick:function(){return K(e.idToken)}},"Withdraw"):(a=e.currentOwner,s=n.accounts[0],a===s?r.a.createElement("button",{onClick:function(){return L(e)}},"Decrypt the file to see it "):"You sold the token")));var a,s}))),j&&r.a.createElement(P,{drizzle:t,drizzleState:n,encData:E,encPrivateKey:y,typeData:N,showDialod:function(e){k(e)}}))},$=function(e){e.drizzle,e.drizzleState;return r.a.createElement("section",null,r.a.createElement("h2",null,"Contacts"))},ee=function(e){var t=Object(a.useState)({drizzleState:null,loading:!0}),n=Object(c.a)(t,2),s=n[0],i=n[1],o=e.drizzle;return Object(a.useEffect)(function(){var e=o.store.subscribe(function(){var e=o.store.getState();e.drizzleStatus.initialized&&i({drizzleState:e,loading:!1})});return function(){e()}},[o.store,s]),s.loading?r.a.createElement("div",{align:"center"},r.a.createElement("h4",null,r.a.createElement("a",{href:"https://metamask.io/",target:"_blank",rel:"noopener noreferrer"},"Please install Metamask extension and reload the page")),"Set it on the rinkeby test network"):r.a.createElement(l.a,null,r.a.createElement("div",null,r.a.createElement("div",{className:"title_logo"},r.a.createElement("img",{src:"https://www.devoleum.com/47fa9787d0791533e573aed32e8147a9.png"}),r.a.createElement("h1",null,"Secret NFT")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("nav",{className:"menu"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(l.b,{to:"/"},"Market Place")),r.a.createElement("li",null,r.a.createElement(l.b,{to:"/assets"},"Owner Assets")),r.a.createElement("li",null,r.a.createElement(l.b,{to:"/upload-ipfs"},"Upload a file to IPFS")),r.a.createElement("li",null,r.a.createElement(l.b,{to:"/contacts"},"Contacts")))),r.a.createElement("hr",null),r.a.createElement("br",null),r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/"},r.a.createElement(V,{drizzle:o,drizzleState:s.drizzleState})),r.a.createElement(u.a,{path:"/assets"},r.a.createElement(Z,{drizzle:o,drizzleState:s.drizzleState})),r.a.createElement(u.a,{path:"/upload-ipfs"},r.a.createElement(R,{drizzle:o,drizzleState:s.drizzleState})),r.a.createElement(u.a,{path:"/download-ipfs"},r.a.createElement(_,{drizzle:o,drizzleState:s.drizzleState})),r.a.createElement(u.a,{path:"/contacts"},r.a.createElement($,{drizzle:o,drizzleState:s.drizzleState})))))},te=n(397),ne=n(398),ae=n(399),re=new v.a(window.web3.currentProvider),se={contracts:[{contractName:"EncNft",web3Contract:new re.eth.Contract(ae.abi,"0x8C151518F690a51aC559eB2eA5A4A6e7AFA75F82")},{contractName:"MarketPlace",web3Contract:new re.eth.Contract(ne.abi,"0xD91f649c4301F9840D2442D3D412C8c014CB0F2A")}],web3:{block:!1,customProvider:new v.a(window.web3.currentProvider)},polls:{accounts:2e3}},ie=new te.Drizzle(se);i.a.render(r.a.createElement(ee,{drizzle:ie}),document.getElementById("root"))}},[[402,1,2]]]);
//# sourceMappingURL=main.0e930691.chunk.js.map